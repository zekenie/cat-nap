{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///index.js","webpack:///webpack/bootstrap 252324753d9d5468e889","webpack:///./lib.js","webpack:///./model.js","webpack:///./schema.js","webpack:///./server.js","webpack:///./endpoint.js","webpack:///./errors/validationError.js","webpack:///./schemaPath.js","webpack:///./validators/email.js","webpack:///./validators/index.js","webpack:///./validators/required.js","webpack:///./validators/type.js","webpack:///./~/json-fetcher/index.js"],"names":["root","factory","exports","module","define","amd","this","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","Server","Endpoint","Model","Schema","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","prototype","_slicedToArray","sliceIterator","arr","_arr","_n","_d","_e","undefined","_s","_i","Symbol","iterator","next","done","push","value","err","Array","isArray","symbols","paths","dirtyList","parent","addPath","path","schemaPath","_this","sym","set","get","buildSchema","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","constructor","schema","_step$value","obj","Map","Set","merge","clear","changes","_this2","keys","forEach","change","keySym","strict","add","fn","startingValue","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","_step2$value","str","assign","reduce","holdOver","val","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","primary","SchemaPath","arguments","config","data","bind","JsonFetcher","requester","base","credentials","subPath","query","options","body","post","put","buildFromArray","map","buildFromObj","model","Proxy","property","params","Promise","predicate","allReferences","n","resolve","reject","getRelated","then","related","doc","getAllRelated","_this3","Error","diff","dirtyValues","server","url","resp","clearDirtyList","_this4","create","values","primaryIdentifier","subRoute","parents","parentUrl","filter","part","join","name","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","setPrototypeOf","__proto__","ValidationError","_Error","getPrototypeOf","apply","validators","buildValidators","type","validator","promises","all","validationResults","result","error","errors","regex","test","v","email","required","e","t","r","o","a","u","f","headers","Accept","Content-Type","l","JSON","stringify","s","defaults","fetch","json","method","toUpperCase","request","toString","arrayToObject","plainObjects","concat","hasOwnProperty","decode","decodeURIComponent","replace","encode","String","charCodeAt","charAt","compact","indexOf","isRegExp","isBuffer","parse","delimiter","depth","arrayLimit","parameterLimit","strictNullHandling","allowPrototypes","allowDots","decoder","split","slice","shift","parseInt","isNaN","parseArrays","exec","index","brackets","indices","repeat","skipNulls","encoder","Date","toISOString","y","d","sort","b","h","arrayFormat","g","j"],"mappings":"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","file":"./index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"catNap\"] = factory();\n\telse\n\t\troot[\"catNap\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"catNap\"] = factory();\n\telse\n\t\troot[\"catNap\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tmodule.exports = {\n\t  Server: __webpack_require__(3),\n\t  Endpoint: __webpack_require__(4),\n\t  Model: __webpack_require__(1),\n\t  Schema: __webpack_require__(2)\n\t};\n\n/***/ },\n/* 1 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar symbols = {\n\t  paths: Symbol('paths'),\n\t  dirtyList: Symbol('dirtyList'),\n\t  parent: Symbol('parent')\n\t};\n\t\n\t/** Private instance methods */\n\tvar addPath = function addPath(path, schemaPath) {\n\t  var _this = this;\n\t\n\t  var sym = Symbol(path);\n\t  this[symbols.paths].set(path, sym);\n\t  Object.defineProperty(this, path, {\n\t    get: function get() {\n\t      return _this[sym];\n\t    }\n\t  });\n\t};\n\t\n\tvar buildSchema = function buildSchema() {\n\t  var _iteratorNormalCompletion = true;\n\t  var _didIteratorError = false;\n\t  var _iteratorError = undefined;\n\t\n\t  try {\n\t    for (var _iterator = this.constructor.schema[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n\t      var _step$value = _slicedToArray(_step.value, 2);\n\t\n\t      var path = _step$value[0];\n\t      var schemaPath = _step$value[1];\n\t\n\t      addPath.call(this, path, schemaPath);\n\t    }\n\t  } catch (err) {\n\t    _didIteratorError = true;\n\t    _iteratorError = err;\n\t  } finally {\n\t    try {\n\t      if (!_iteratorNormalCompletion && _iterator.return) {\n\t        _iterator.return();\n\t      }\n\t    } finally {\n\t      if (_didIteratorError) {\n\t        throw _iteratorError;\n\t      }\n\t    }\n\t  }\n\t};\n\t/** /end private instance methods */\n\t\n\tvar Model = function () {\n\t  function Model(obj, parent) {\n\t    _classCallCheck(this, Model);\n\t\n\t    this[symbols.parent] = parent;\n\t\n\t    // this is a private hashmap of strings for a path to their symbols\n\t    this[symbols.paths] = new Map();\n\t\n\t    // set of paths that have changed\n\t    this[symbols.dirtyList] = new Set();\n\t\n\t    buildSchema.call(this);\n\t    this.merge(obj);\n\t  }\n\t\n\t  _createClass(Model, [{\n\t    key: 'clearDirtyList',\n\t    value: function clearDirtyList() {\n\t      this[symbols.dirtyList].clear();\n\t    }\n\t  }, {\n\t    key: 'merge',\n\t    value: function merge(changes) {\n\t      var _this2 = this;\n\t\n\t      Object.keys(changes).forEach(function (key) {\n\t        var change = changes[key];\n\t        var keySym = _this2[symbols.paths].get(key);\n\t        if (!keySym) {\n\t          if (!_this2.constructor.schema.strict) {\n\t            addPath.call(_this2, key);\n\t            keySym = _this2[symbols.paths].get(key);\n\t          } else {\n\t            return;\n\t          }\n\t        }\n\t        _this2[keySym] = change;\n\t        _this2[symbols.dirtyList].add(key);\n\t      });\n\t      return this;\n\t    }\n\t  }, {\n\t    key: 'reduce',\n\t    value: function reduce(fn, startingValue) {\n\t      var _iteratorNormalCompletion2 = true;\n\t      var _didIteratorError2 = false;\n\t      var _iteratorError2 = undefined;\n\t\n\t      try {\n\t        for (var _iterator2 = this[symbols.paths][Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n\t          var _step2$value = _slicedToArray(_step2.value, 2);\n\t\n\t          var str = _step2$value[0];\n\t          var sym = _step2$value[1];\n\t\n\t          startingValue = fn.call(this, startingValue, str, this[sym]);\n\t        }\n\t      } catch (err) {\n\t        _didIteratorError2 = true;\n\t        _iteratorError2 = err;\n\t      } finally {\n\t        try {\n\t          if (!_iteratorNormalCompletion2 && _iterator2.return) {\n\t            _iterator2.return();\n\t          }\n\t        } finally {\n\t          if (_didIteratorError2) {\n\t            throw _iteratorError2;\n\t          }\n\t        }\n\t      }\n\t\n\t      return startingValue;\n\t    }\n\t  }, {\n\t    key: 'values',\n\t    get: function get() {\n\t      return Object.assign({}, this.reduce(function (holdOver, key, val) {\n\t        holdOver[key] = val;\n\t        return holdOver;\n\t      }, {}));\n\t    }\n\t  }, {\n\t    key: 'dirtyValues',\n\t    get: function get() {\n\t      var obj = {};\n\t      var _iteratorNormalCompletion3 = true;\n\t      var _didIteratorError3 = false;\n\t      var _iteratorError3 = undefined;\n\t\n\t      try {\n\t        for (var _iterator3 = this[symbols.dirtyList][Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n\t          var key = _step3.value;\n\t\n\t          obj[key] = this[key];\n\t        }\n\t      } catch (err) {\n\t        _didIteratorError3 = true;\n\t        _iteratorError3 = err;\n\t      } finally {\n\t        try {\n\t          if (!_iteratorNormalCompletion3 && _iterator3.return) {\n\t            _iterator3.return();\n\t          }\n\t        } finally {\n\t          if (_didIteratorError3) {\n\t            throw _iteratorError3;\n\t          }\n\t        }\n\t      }\n\t\n\t      return Object.assign({}, obj);\n\t    }\n\t  }, {\n\t    key: 'parentDoc',\n\t    get: function get() {\n\t      return this[symbols.parent];\n\t    }\n\t  }, {\n\t    key: 'primaryIdentifier',\n\t    get: function get() {\n\t      return this[this.constructor.schema.primary];\n\t    }\n\t  }]);\n\t\n\t  return Model;\n\t}();\n\t\n\tmodule.exports = Model;\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar SchemaPath = __webpack_require__(6);\n\t\n\tvar Schema = function () {\n\t  function Schema() {\n\t    var _this = this;\n\t\n\t    var props = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\t    var config = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\t\n\t    _classCallCheck(this, Schema);\n\t\n\t    this.data = new Map();\n\t    this[Symbol.iterator] = this.data[Symbol.iterator].bind(this.data);\n\t    Object.keys(props).forEach(function (key) {\n\t      return _this.set(key, props[key]);\n\t    });\n\t    Object.assign(this, config);\n\t  }\n\t\n\t  _createClass(Schema, [{\n\t    key: 'set',\n\t    value: function set(key, val) {\n\t      if (val.primary) {\n\t        this.primary = key;\n\t      }\n\t      this.data.set(key, new SchemaPath(val));\n\t    }\n\t  }, {\n\t    key: 'get',\n\t    value: function get(key) {\n\t      return this.data.get(key);\n\t    }\n\t  }]);\n\t\n\t  return Schema;\n\t}();\n\t\n\tmodule.exports = Schema;\n\n/***/ },\n/* 3 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar JsonFetcher = __webpack_require__(11).JsonFetcher;\n\tvar requester = new JsonFetcher();\n\t\n\tvar Server = function () {\n\t  function Server(base) {\n\t    _classCallCheck(this, Server);\n\t\n\t    this.base = base;\n\t    this.config({\n\t      credentials: 'include'\n\t    });\n\t  }\n\t\n\t  _createClass(Server, [{\n\t    key: 'config',\n\t    value: function config(obj) {\n\t      requester.config(obj);\n\t    }\n\t  }, {\n\t    key: 'get',\n\t    value: function get(subPath, query) {\n\t      var options = arguments.length <= 2 || arguments[2] === undefined ? {} : arguments[2];\n\t\n\t      options.query = query;\n\t      return requester.get(this.base + subPath, options);\n\t    }\n\t  }, {\n\t    key: 'delete',\n\t    value: function _delete(subPath, query) {\n\t      var options = arguments.length <= 2 || arguments[2] === undefined ? {} : arguments[2];\n\t\n\t      options.query = query;\n\t      return requester.delete(base + subPath, options);\n\t    }\n\t  }, {\n\t    key: 'post',\n\t    value: function post(subPath, body) {\n\t      var options = arguments.length <= 2 || arguments[2] === undefined ? {} : arguments[2];\n\t\n\t      options.body = body;\n\t      return requester.post(this.base + subPath, options);\n\t    }\n\t  }, {\n\t    key: 'put',\n\t    value: function put(subPath, body) {\n\t      var options = arguments.length <= 2 || arguments[2] === undefined ? {} : arguments[2];\n\t\n\t      options.body = body;\n\t      return requester.put(base + subPath, options);\n\t    }\n\t  }]);\n\t\n\t  return Server;\n\t}();\n\t\n\tmodule.exports = Server;\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Server = __webpack_require__(3);\n\t// const inflection = require('inflection');\n\t\n\tvar Model = __webpack_require__(1);\n\t\n\t/** private statics */\n\tvar buildFromArray = function buildFromArray(arr, parent) {\n\t  var _this = this;\n\t\n\t  return arr.map(function (obj) {\n\t    return buildFromObj.call(_this, obj, parent);\n\t  });\n\t};\n\t\n\tvar buildFromObj = function buildFromObj(obj, parent) {\n\t  return new this(obj, parent);\n\t};\n\t/** end private statics */\n\t\n\tvar Endpoint = function () {\n\t  function Endpoint(obj) {\n\t    var parent = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\t\n\t    _classCallCheck(this, Endpoint);\n\t\n\t    this.parent = parent;\n\t    this.data = new this.constructor.model(obj, parent.model);\n\t    return new Proxy(this, {\n\t      get: function get(target, property) {\n\t        if (target[property]) {\n\t          return target[property];\n\t        }\n\t        return target.data[property];\n\t      }\n\t    });\n\t  }\n\t\n\t  // this establishes stable interface\n\t\n\t\n\t  _createClass(Endpoint, [{\n\t    key: 'getRelated',\n\t    value: function getRelated() {\n\t      var params = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\t\n\t      return Promise.props(params);\n\t    }\n\t  }, {\n\t    key: 'getAllRelated',\n\t    value: function getAllRelated(predicate) {\n\t      var _this2 = this;\n\t\n\t      var allReferences = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\t      var n = arguments.length <= 2 || arguments[2] === undefined ? 0 : arguments[2];\n\t\n\t      predicate = predicate || function () {\n\t        return true;\n\t      };\n\t      return new Promise(function (resolve, reject) {\n\t        if (!predicate(_this2, n)) {\n\t          resolve();\n\t        }\n\t        _this2.getRelated().then(function (related) {\n\t          Object.assign(allReferences, related);\n\t          return Promise.map(Object.keys(related), function (key) {\n\t            return Promise.map(related[key], function (doc) {\n\t              return doc.getAllRelated(predicate, allReferences, n + 1);\n\t            });\n\t          }).then(function () {\n\t            return resolve(allReferences);\n\t          }).catch(reject);\n\t        });\n\t      });\n\t    }\n\t  }, {\n\t    key: 'update',\n\t    value: function update() {\n\t      var _this3 = this;\n\t\n\t      var changes = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\t\n\t      if (!this.id) {\n\t        throw new Error('cannot update document without id. try calling create');\n\t      }\n\t      this.data.merge(changes);\n\t      var diff = this.data.dirtyValues;\n\t      return this.constructor.server.put(this.url, diff).then(function (resp) {\n\t        return _this3.data.merge(resp);\n\t      }).then(function () {\n\t        return _this3.data.clearDirtyList();\n\t      });\n\t    }\n\t  }, {\n\t    key: 'create',\n\t    value: function create() {\n\t      var _this4 = this;\n\t\n\t      if (!!this.id) {\n\t        throw new Error('cannot recreate document that already has identifier');\n\t      }\n\t      return this.constructor.create(this.data.values).then(function (resp) {\n\t        return _this4.data.merge(resp);\n\t      }).then(function () {\n\t        return _this4.data.clearDirtyList();\n\t      });\n\t    }\n\t  }, {\n\t    key: 'delete',\n\t    value: function _delete() {\n\t      return this.constructor.delete(this.url);\n\t    }\n\t  }, {\n\t    key: 'id',\n\t    get: function get() {\n\t      return this.data[this.data.primaryIdentifier];\n\t    }\n\t  }, {\n\t    key: 'parentUrl',\n\t    get: function get() {\n\t      if (!!this.parent) {\n\t        return this.parent.url;\n\t      } else {\n\t        return this.constructor.path;\n\t      }\n\t    }\n\t  }, {\n\t    key: 'url',\n\t    get: function get() {\n\t      var subRoute = void 0;\n\t      if (this.constructor.parents) {\n\t        subRoute = this.constructor.parents.get(this.parent.constructor);\n\t      }\n\t      return [this.parentUrl, subRoute, this.id].filter(function (part) {\n\t        return !!part;\n\t      }).join('/');\n\t    }\n\t  }], [{\n\t    key: 'find',\n\t    value: function find() {\n\t      var query = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\t\n\t      if (!!this.parent) {\n\t        throw new Error('cannot find on nested route');\n\t      }\n\t      return this.server.get(this.path, query).then(buildFromArray.bind(this));\n\t    }\n\t  }, {\n\t    key: 'delete',\n\t    value: function _delete(url) {\n\t      return this.server.delete(url);\n\t    }\n\t  }, {\n\t    key: 'findById',\n\t    value: function findById(id) {\n\t      if (!!this.parent) {\n\t        throw new Error('cannot find by id on nested route');\n\t      }\n\t      return this.server.get(this.path + '/' + id).then(buildFromObj.bind(this));\n\t    }\n\t  }, {\n\t    key: 'create',\n\t    value: function create() {\n\t      var obj = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\t\n\t      if (!!this.parent) {\n\t        throw new Error('cannot create ' + this.name + ' with create method because ' + this.name + ' is a subclass. call create from a parent.');\n\t      }\n\t      return this.server.post(this.path, obj).then(buildFromObj.bind(this));\n\t    }\n\t\n\t    // static nest(otherClass, route) {\n\t    //   route = route || inflection.pluralize(otherClass.name).toLowerCase();\n\t    //   // parents is a map of the class to its mounted route\n\t    //   otherClass.parents = otherClass.parents || new Map();\n\t    //   otherClass.parents.set(this, route);\n\t\n\t    //   const pluralName = inflection.pluralize(otherClass.name);\n\t    //   const singularName = otherClass.name;\n\t    //   this.prototype[`get${pluralName}`] = function() {\n\t    //     return this.server.get(`${this.url}/${route}`)\n\t    //       .then(resArr => buildFromArray.call(otherClass, resArr, this));\n\t    //   };\n\t\n\t    //   this.prototype[`create${singularName}`] = function(obj={}) {\n\t    //     return this.server.post(`${this.url}/${route}`, obj )\n\t    //       .then(res => buildFromObj.call(otherClass, res, this))\n\t    //   }\n\t    // }\n\t\n\t  }]);\n\t\n\t  return Endpoint;\n\t}();\n\t\n\tmodule.exports = Endpoint;\n\tmodule.exports.Schema = __webpack_require__(2);\n\n/***/ },\n/* 5 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar ValidationError = function (_Error) {\n\t  _inherits(ValidationError, _Error);\n\t\n\t  function ValidationError() {\n\t    _classCallCheck(this, ValidationError);\n\t\n\t    return _possibleConstructorReturn(this, Object.getPrototypeOf(ValidationError).apply(this, arguments));\n\t  }\n\t\n\t  return ValidationError;\n\t}(Error);\n\t\n\tmodule.exports = ValidationError;\n\n/***/ },\n/* 6 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar validators = __webpack_require__(8);\n\tvar ValidationError = __webpack_require__(5);\n\t\n\tvar buildValidators = function buildValidators() {\n\t  if (!!this.type) {\n\t    this.validators.push('type');\n\t  }\n\t  this.validators = this.validators.map(function (validator) {\n\t    if (typeof validator === 'string') {\n\t      return validators[validator];\n\t    }\n\t    return validator;\n\t  }).filter(function (validator) {\n\t    return !!validator;\n\t  });\n\t};\n\t\n\tvar SchemaPath = function () {\n\t  function SchemaPath() {\n\t    var props = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\t\n\t    _classCallCheck(this, SchemaPath);\n\t\n\t    Object.assign(this, props);\n\t    this.validators = this.validators || [];\n\t    buildValidators.call(this);\n\t  }\n\t\n\t  _createClass(SchemaPath, [{\n\t    key: 'validate',\n\t    value: function validate(value) {\n\t      var _this = this;\n\t\n\t      var promises = this.validators.map(function (validator) {\n\t        return validator.validator(value);\n\t      });\n\t\n\t      return Promise.all(promises).then(function (validationResults) {\n\t        return validationResults.map(function (result, i) {\n\t          if (result) {\n\t            return new ValidationError(_this.validators[i].error(value));\n\t          }\n\t        });\n\t      }).then(function (errors) {\n\t        return errors.filter(function (err) {\n\t          return !!err;\n\t        });\n\t      });\n\t    }\n\t  }]);\n\t\n\t  return SchemaPath;\n\t}();\n\t\n\tmodule.exports = SchemaPath;\n\n/***/ },\n/* 7 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tmodule.exports.validator = function (val) {\n\t  var regex = /\\S+@\\S+\\.\\S+/;\n\t  return regex.test(val);\n\t};\n\t\n\tmodule.exports.error = function (v) {\n\t  return v + ' is not an email address';\n\t};\n\n/***/ },\n/* 8 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\texports.email = __webpack_require__(7);\n\texports.required = __webpack_require__(9);\n\texports.type = __webpack_require__(10);\n\n/***/ },\n/* 9 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tmodule.exports.validator = function (value) {\n\t  return !undefined.required || !!value;\n\t};\n\t\n\tmodule.exports.error = function () {\n\t  return 'Value is required for this path';\n\t};\n\n/***/ },\n/* 10 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tmodule.exports.validator = function (value) {\n\t  return !!value && value.constructor === undefined.type;\n\t};\n\t\n\tmodule.exports.error = function (val) {\n\t  return val + ' does not match correct type';\n\t};\n\n/***/ },\n/* 11 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t!function(e,t){ true?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports.JsonFetcher=t():e.JsonFetcher=t()}(this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var r={};return t.m=e,t.c=r,t.p=\"\",t(0)}([function(e,t,r){\"use strict\";function n(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol?\"symbol\":typeof e},c=r(4),a=r(2),u=r(3),f={credentials:\"same-origin\",headers:{Accept:\"application/json\",\"Content-Type\":\"application/json\"}},l=function(e){return\"string\"===!(\"undefined\"==typeof e?\"undefined\":i(e))?e:JSON.stringify(e)},s=function(e){return\"string\"==typeof e?e:c.stringify(e)},p=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];n(this,e),this.defaults=Object.assign(t,f)}return o(e,[{key:\"config\",value:function(e){u(this.defaults,e)}},{key:\"request\",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(t=Object.assign(a(this.defaults),t),t.body)try{t.body=l(t.body)}catch(r){return Promise.reject(r)}return t.query&&(t.query=s(t.query),e+=\"?\"+t.query),fetch(e,t).then(function(e){return e.json()})}}]),e}();[\"head\",\"options\",\"connect\",\"get\",\"post\",\"put\",\"delete\"].reduce(function(e,t){return e[t]=function(e){var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return r.method=t.toUpperCase(),this.request(e,r)},e},p.prototype),t.JsonFetcher=p},function(e,t){\"use strict\";var r=function(){for(var e=new Array(256),t=0;256>t;++t)e[t]=\"%\"+((16>t?\"0\":\"\")+t.toString(16)).toUpperCase();return e}();t.arrayToObject=function(e,t){for(var r=t.plainObjects?Object.create(null):{},n=0;n<e.length;++n)\"undefined\"!=typeof e[n]&&(r[n]=e[n]);return r},t.merge=function(e,r,n){if(!r)return e;if(\"object\"!=typeof r){if(Array.isArray(e))e.push(r);else{if(\"object\"!=typeof e)return[e,r];e[r]=!0}return e}if(\"object\"!=typeof e)return[e].concat(r);var o=e;return Array.isArray(e)&&!Array.isArray(r)&&(o=t.arrayToObject(e,n)),Object.keys(r).reduce(function(e,o){var i=r[o];return Object.prototype.hasOwnProperty.call(e,o)?e[o]=t.merge(e[o],i,n):e[o]=i,e},o)},t.decode=function(e){try{return decodeURIComponent(e.replace(/\\+/g,\" \"))}catch(t){return e}},t.encode=function(e){if(0===e.length)return e;for(var t=\"string\"==typeof e?e:String(e),n=\"\",o=0;o<t.length;++o){var i=t.charCodeAt(o);45===i||46===i||95===i||126===i||i>=48&&57>=i||i>=65&&90>=i||i>=97&&122>=i?n+=t.charAt(o):128>i?n+=r[i]:2048>i?n+=r[192|i>>6]+r[128|63&i]:55296>i||i>=57344?n+=r[224|i>>12]+r[128|i>>6&63]+r[128|63&i]:(o+=1,i=65536+((1023&i)<<10|1023&t.charCodeAt(o)),n+=r[240|i>>18]+r[128|i>>12&63]+r[128|i>>6&63]+r[128|63&i])}return n},t.compact=function(e,r){if(\"object\"!=typeof e||null===e)return e;var n=r||[],o=n.indexOf(e);if(-1!==o)return n[o];if(n.push(e),Array.isArray(e)){for(var i=[],c=0;c<e.length;++c)e[c]&&\"object\"==typeof e[c]?i.push(t.compact(e[c],n)):\"undefined\"!=typeof e[c]&&i.push(e[c]);return i}for(var a=Object.keys(e),u=0;u<a.length;++u){var f=a[u];e[f]=t.compact(e[f],n)}return e},t.isRegExp=function(e){return\"[object RegExp]\"===Object.prototype.toString.call(e)},t.isBuffer=function(e){return null===e||\"undefined\"==typeof e?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))}},function(e,t){\"use strict\";var r=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol?\"symbol\":typeof e},n=e.exports=function(e){if(null==e||\"object\"!=(\"undefined\"==typeof e?\"undefined\":r(e)))return e;var t=e.constructor();return Object.keys(e).forEach(function(r){e instanceof Object?t[r]=n(e[r]):t[r]=e[r]}),t}},function(e,t){\"use strict\";function r(e){return e&&\"object\"===(\"undefined\"==typeof e?\"undefined\":n(e))&&!Array.isArray(e)&&null!==e}var n=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol?\"symbol\":typeof e},o=e.exports=function(e,t){return r(e)&&r(t)?(Object.keys(t).forEach(function(n){r(t[n])?(e[n]||(e[n]={}),o(e[n],t[n])):e[n]=t[n]}),e):e}},function(e,t,r){\"use strict\";var n=r(6),o=r(5);e.exports={stringify:n,parse:o}},function(e,t,r){\"use strict\";var n=r(1),o={delimiter:\"&\",depth:5,arrayLimit:20,parameterLimit:1e3,strictNullHandling:!1,plainObjects:!1,allowPrototypes:!1,allowDots:!1,decoder:n.decode},i=function(e,t){for(var r={},n=e.split(t.delimiter,t.parameterLimit===1/0?void 0:t.parameterLimit),o=0;o<n.length;++o){var i=n[o],c=-1===i.indexOf(\"]=\")?i.indexOf(\"=\"):i.indexOf(\"]=\")+1;if(-1===c)r[t.decoder(i)]=\"\",t.strictNullHandling&&(r[t.decoder(i)]=null);else{var a=t.decoder(i.slice(0,c)),u=t.decoder(i.slice(c+1));Object.prototype.hasOwnProperty.call(r,a)?r[a]=[].concat(r[a]).concat(u):r[a]=u}}return r},c=function u(e,t,r){if(!e.length)return t;var n,o=e.shift();if(\"[]\"===o)n=[],n=n.concat(u(e,t,r));else{n=r.plainObjects?Object.create(null):{};var i=\"[\"===o[0]&&\"]\"===o[o.length-1]?o.slice(1,o.length-1):o,c=parseInt(i,10);!isNaN(c)&&o!==i&&String(c)===i&&c>=0&&r.parseArrays&&c<=r.arrayLimit?(n=[],n[c]=u(e,t,r)):n[i]=u(e,t,r)}return n},a=function(e,t,r){if(e){var n=r.allowDots?e.replace(/\\.([^\\.\\[]+)/g,\"[$1]\"):e,o=/^([^\\[\\]]*)/,i=/(\\[[^\\[\\]]*\\])/g,a=o.exec(n),u=[];if(a[1]){if(!r.plainObjects&&Object.prototype.hasOwnProperty(a[1])&&!r.allowPrototypes)return;u.push(a[1])}for(var f=0;null!==(a=i.exec(n))&&f<r.depth;)f+=1,(r.plainObjects||!Object.prototype.hasOwnProperty(a[1].replace(/\\[|\\]/g,\"\"))||r.allowPrototypes)&&u.push(a[1]);return a&&u.push(\"[\"+n.slice(a.index)+\"]\"),c(u,t,r)}};e.exports=function(e,t){var r=t||{};if(null!==r.decoder&&void 0!==r.decoder&&\"function\"!=typeof r.decoder)throw new TypeError(\"Decoder has to be a function.\");if(r.delimiter=\"string\"==typeof r.delimiter||n.isRegExp(r.delimiter)?r.delimiter:o.delimiter,r.depth=\"number\"==typeof r.depth?r.depth:o.depth,r.arrayLimit=\"number\"==typeof r.arrayLimit?r.arrayLimit:o.arrayLimit,r.parseArrays=r.parseArrays!==!1,r.decoder=\"function\"==typeof r.decoder?r.decoder:o.decoder,r.allowDots=\"boolean\"==typeof r.allowDots?r.allowDots:o.allowDots,r.plainObjects=\"boolean\"==typeof r.plainObjects?r.plainObjects:o.plainObjects,r.allowPrototypes=\"boolean\"==typeof r.allowPrototypes?r.allowPrototypes:o.allowPrototypes,r.parameterLimit=\"number\"==typeof r.parameterLimit?r.parameterLimit:o.parameterLimit,r.strictNullHandling=\"boolean\"==typeof r.strictNullHandling?r.strictNullHandling:o.strictNullHandling,\"\"===e||null===e||\"undefined\"==typeof e)return r.plainObjects?Object.create(null):{};for(var c=\"string\"==typeof e?i(e,r):e,u=r.plainObjects?Object.create(null):{},f=Object.keys(c),l=0;l<f.length;++l){var s=f[l],p=a(s,c[s],r);u=n.merge(u,p,r)}return n.compact(u)}},function(e,t,r){\"use strict\";var n=r(1),o={brackets:function(e){return e+\"[]\"},indices:function(e,t){return e+\"[\"+t+\"]\"},repeat:function(e){return e}},i={delimiter:\"&\",strictNullHandling:!1,skipNulls:!1,encode:!0,encoder:n.encode},c=function a(e,t,r,o,i,c,u,f,l){var s=e;if(\"function\"==typeof u)s=u(t,s);else if(s instanceof Date)s=s.toISOString();else if(null===s){if(o)return c?c(t):t;s=\"\"}if(\"string\"==typeof s||\"number\"==typeof s||\"boolean\"==typeof s||n.isBuffer(s))return c?[c(t)+\"=\"+c(s)]:[t+\"=\"+String(s)];var p=[];if(\"undefined\"==typeof s)return p;var y;if(Array.isArray(u))y=u;else{var d=Object.keys(s);y=f?d.sort(f):d}for(var b=0;b<y.length;++b){var m=y[b];i&&null===s[m]||(p=Array.isArray(s)?p.concat(a(s[m],r(t,m),r,o,i,c,u,f,l)):p.concat(a(s[m],t+(l?\".\"+m:\"[\"+m+\"]\"),r,o,i,c,u,f,l)))}return p};e.exports=function(e,t){var r,n,a=e,u=t||{},f=\"undefined\"==typeof u.delimiter?i.delimiter:u.delimiter,l=\"boolean\"==typeof u.strictNullHandling?u.strictNullHandling:i.strictNullHandling,s=\"boolean\"==typeof u.skipNulls?u.skipNulls:i.skipNulls,p=\"boolean\"==typeof u.encode?u.encode:i.encode,y=p?\"function\"==typeof u.encoder?u.encoder:i.encoder:null,d=\"function\"==typeof u.sort?u.sort:null,b=\"undefined\"==typeof u.allowDots?!1:u.allowDots;if(null!==u.encoder&&void 0!==u.encoder&&\"function\"!=typeof u.encoder)throw new TypeError(\"Encoder has to be a function.\");\"function\"==typeof u.filter?(n=u.filter,a=n(\"\",a)):Array.isArray(u.filter)&&(r=n=u.filter);var m=[];if(\"object\"!=typeof a||null===a)return\"\";var h;h=u.arrayFormat in o?u.arrayFormat:\"indices\"in u?u.indices?\"indices\":\"repeat\":\"indices\";var g=o[h];r||(r=Object.keys(a)),d&&r.sort(d);for(var v=0;v<r.length;++v){var j=r[v];s&&null===a[j]||(m=m.concat(c(a[j],j,g,l,s,y,n,d,b)))}return m.join(f)}}])});\n\t//# sourceMappingURL=index.js.map\n\n/***/ }\n/******/ ])\n});\n;\n\n\n/** WEBPACK FOOTER **\n ** index.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 252324753d9d5468e889\n **/","module.exports = {\n  Server: require('./server'),\n  Endpoint: require('./endpoint'),\n  Model: require('./model'),\n  Schema: require('./schema')\n};\n\n\n/** WEBPACK FOOTER **\n ** ./lib.js\n **/","const symbols = {\n  paths: Symbol('paths'),\n  dirtyList: Symbol('dirtyList'),\n  parent: Symbol('parent')\n}\n\n/** Private instance methods */\nconst addPath = function(path, schemaPath) {\n  const sym = Symbol(path);\n  this[symbols.paths].set(path, sym);\n  Object.defineProperty(this, path, {\n    get: () => {\n      return this[sym];\n    }\n  });\n};\n\nconst buildSchema = function() {\n  for(let [path, schemaPath] of this.constructor.schema) {\n    addPath.call(this, path, schemaPath);\n  }\n}\n/** /end private instance methods */\n\nclass Model {\n  constructor(obj, parent) {\n    this[symbols.parent] = parent;\n\n    // this is a private hashmap of strings for a path to their symbols\n    this[symbols.paths] = new Map();\n\n    // set of paths that have changed\n    this[symbols.dirtyList] = new Set();\n\n    buildSchema.call(this);\n    this.merge(obj);\n  }\n\n  clearDirtyList() {\n    this[symbols.dirtyList].clear();\n  }\n\n  merge(changes) {\n    Object.keys(changes)\n      .forEach(key => {\n        const change = changes[key];\n        let keySym = this[symbols.paths].get(key);\n        if(!keySym) {\n          if(!this.constructor.schema.strict) {\n            addPath.call(this,key);\n            keySym = this[symbols.paths].get(key);\n          } else { return; }\n        }\n        this[keySym] = change;\n        this[symbols.dirtyList].add(key)\n      });\n    return this;\n  }\n\n  reduce(fn, startingValue) {\n    for(let [str, sym] of this[symbols.paths]) {\n      startingValue = fn.call(this, startingValue, str, this[sym])\n    }\n    return startingValue;\n  }\n\n  get values() {\n    return Object.assign({},this.reduce((holdOver, key, val) => {\n      holdOver[key] = val;\n      return holdOver;\n    }, {}));\n  }\n\n  get dirtyValues() {\n    const obj = {};\n    for(let key of this[symbols.dirtyList]) {\n      obj[key] = this[key];\n    }\n    return Object.assign({}, obj);\n  }\n\n  get parentDoc() {\n    return this[symbols.parent];\n  }\n\n  get primaryIdentifier() {\n    return this[this.constructor.schema.primary];\n  }\n\n}\n\nmodule.exports = Model;\n\n\n/** WEBPACK FOOTER **\n ** ./model.js\n **/","'use strict';\n\nconst SchemaPath = require('./schemaPath');\n\nclass Schema {\n  constructor(props={}, config={}) {\n    this.data = new Map();\n    this[Symbol.iterator] = this.data[Symbol.iterator].bind(this.data);\n    Object.keys(props).forEach(key => this.set(key, props[key]));\n    Object.assign(this, config);\n  }\n\n  set(key, val) {\n    if(val.primary) { this.primary = key; }\n    this.data.set(key, new SchemaPath(val));\n  }\n\n  get(key) {\n    return this.data.get(key);\n  }\n}\n\nmodule.exports = Schema;\n\n\n/** WEBPACK FOOTER **\n ** ./schema.js\n **/","const JsonFetcher = require('json-fetcher').JsonFetcher;\nconst requester = new JsonFetcher();\n\nclass Server {\n  constructor(base) {\n    this.base = base;\n    this.config({\n      credentials: 'include'\n    });\n  }\n\n  config(obj) {\n    requester.config(obj);\n  }\n\n  get(subPath, query, options={}) {\n    options.query = query;\n    return requester.get(this.base + subPath, options);\n  }\n\n  delete(subPath, query, options={}) {\n    options.query = query;\n    return requester.delete(base + subPath, options);\n  }\n\n  post(subPath, body, options={}) {\n    options.body = body;\n    return requester.post(this.base + subPath, options);\n  }\n\n  put(subPath, body, options={}) {\n    options.body = body;\n    return requester.put(base + subPath, options);\n  }\n}\n\nmodule.exports = Server;\n\n\n/** WEBPACK FOOTER **\n ** ./server.js\n **/","const Server = require('./server');\n// const inflection = require('inflection');\n\n\nconst Model = require('./model');\n\n/** private statics */\nconst buildFromArray = function(arr, parent) {\n  return arr.map(obj => buildFromObj.call(this, obj, parent));\n};\n\n\nconst buildFromObj = function(obj, parent) {\n  return new this(obj, parent);\n};  \n/** end private statics */\n\n\n\nclass Endpoint {\n  constructor(obj, parent={}) {\n    this.parent = parent;\n    this.data = new this.constructor.model(obj, parent.model);\n    return new Proxy(this, {\n      get: (target, property) => {\n        if(target[property]) {\n          return target[property];\n        }\n        return target.data[property];\n      }\n    });\n  }\n\n  // this establishes stable interface\n  getRelated(params={}) {\n    return Promise.props(params);\n  }\n\n  getAllRelated(predicate, allReferences={}, n=0) {\n    predicate = predicate || function() { return true; }\n    return new Promise((resolve, reject) => {\n      if(!predicate(this,n)) { resolve(); }\n      this.getRelated()\n        .then(related => {\n          Object.assign(allReferences, related);\n          return Promise.map(Object.keys(related), key => {\n            return Promise.map(related[key], doc => {\n              return doc.getAllRelated(predicate, allReferences, n+1)\n            });\n          })\n          .then(() => resolve(allReferences))\n          .catch(reject);\n        });\n    });\n  }\n\n  get id() {\n    return this.data[this.data.primaryIdentifier];\n  }\n\n  get parentUrl() {\n    if(!!this.parent) {\n      return this.parent.url;\n    } else {\n      return this.constructor.path;\n    }\n  }\n\n  get url() {\n    let subRoute;\n    if(this.constructor.parents) {\n      subRoute = this.constructor.parents.get(this.parent.constructor);\n    }\n    return [this.parentUrl,subRoute,this.id]\n      .filter(part => !!part)\n      .join('/');\n  }\n\n  update(changes={}) {\n    if(!this.id) { throw new Error('cannot update document without id. try calling create'); }\n    this.data.merge(changes);\n    const diff = this.data.dirtyValues;\n    return this.constructor.server.put(this.url,  diff)\n      .then(resp => this.data.merge(resp))\n      .then(() => this.data.clearDirtyList());\n  }\n\n  create() {\n    if(!!this.id) { throw new Error('cannot recreate document that already has identifier'); }\n    return this.constructor.create(this.data.values)\n      .then(resp => this.data.merge(resp))\n      .then(() => this.data.clearDirtyList());\n  }\n\n  delete() {\n    return this.constructor.delete(this.url);\n  }\n\n\n  static find(query={}) {\n    if(!!this.parent) {\n      throw new Error(`cannot find on nested route`);\n    }\n    return this.server.get(this.path, query)\n      .then(buildFromArray.bind(this));\n  }\n\n\n  static delete(url) {\n    return this.server.delete(url);\n  }\n\n  static findById(id) {\n    if(!!this.parent) {\n      throw new Error(`cannot find by id on nested route`);\n    }\n    return this.server.get(`${this.path}/${id}`)\n      .then(buildFromObj.bind(this));\n  }\n\n  static create(obj={}) {\n    if(!!this.parent) {\n      throw new Error(`cannot create ${this.name} with create method because ${this.name} is a subclass. call create from a parent.`)\n    }\n    return this.server.post(this.path, obj)\n      .then(buildFromObj.bind(this));\n  }\n\n  // static nest(otherClass, route) {\n  //   route = route || inflection.pluralize(otherClass.name).toLowerCase();\n  //   // parents is a map of the class to its mounted route\n  //   otherClass.parents = otherClass.parents || new Map();\n  //   otherClass.parents.set(this, route);\n\n  //   const pluralName = inflection.pluralize(otherClass.name);\n  //   const singularName = otherClass.name;\n  //   this.prototype[`get${pluralName}`] = function() {\n  //     return this.server.get(`${this.url}/${route}`)\n  //       .then(resArr => buildFromArray.call(otherClass, resArr, this));\n  //   };\n\n  //   this.prototype[`create${singularName}`] = function(obj={}) {\n  //     return this.server.post(`${this.url}/${route}`, obj )\n  //       .then(res => buildFromObj.call(otherClass, res, this))\n  //   }\n  // }\n}\n\nmodule.exports = Endpoint;\nmodule.exports.Schema = require('./schema');\n\n\n/** WEBPACK FOOTER **\n ** ./endpoint.js\n **/","class ValidationError extends Error {}\nmodule.exports = ValidationError;\n\n\n/** WEBPACK FOOTER **\n ** ./errors/validationError.js\n **/","'use strict';\nconst validators = require('./validators');\nconst ValidationError = require('./errors/validationError');\n\nconst buildValidators = function() {\n  if(!!this.type) {\n    this.validators.push('type');\n  }\n  this.validators = this.validators\n    .map(validator => {\n      if(typeof validator === 'string') {\n        return validators[validator];\n      }\n      return validator;\n    })\n    .filter(validator => !!validator);\n};\n\nclass SchemaPath {\n  constructor(props={}) {\n    Object.assign(this, props);\n    this.validators = this.validators || [];\n    buildValidators.call(this);\n  }\n\n  validate(value) {\n\n    const promises = this.validators\n      .map(validator => validator.validator(value))\n\n    return Promise.all(promises)\n      .then(validationResults => {\n        return validationResults.map((result, i) => {\n          if(result) {\n            return new ValidationError(this.validators[i].error(value));\n          }\n        });\n      })\n      .then(errors => errors.filter(err => !!err));\n    \n  }\n}\n\nmodule.exports = SchemaPath;\n\n\n/** WEBPACK FOOTER **\n ** ./schemaPath.js\n **/","'use strict';\nmodule.exports.validator = val => {\n  var regex = /\\S+@\\S+\\.\\S+/;\n  return regex.test(val);\n};\n\nmodule.exports.error = v => `${v} is not an email address`;\n\n\n/** WEBPACK FOOTER **\n ** ./validators/email.js\n **/","exports.email = require('./email');\nexports.required = require('./required');\nexports.type = require('./type');\n\n\n/** WEBPACK FOOTER **\n ** ./validators/index.js\n **/","'use strict';\nmodule.exports.validator = value => !this.required || !!value;\n\nmodule.exports.error = () => 'Value is required for this path';\n\n\n/** WEBPACK FOOTER **\n ** ./validators/required.js\n **/","'use strict';\nmodule.exports.validator = value => !!value && value.constructor === this.type;\n\nmodule.exports.error = val => `${val} does not match correct type`;\n\n\n/** WEBPACK FOOTER **\n ** ./validators/type.js\n **/","!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports.JsonFetcher=t():e.JsonFetcher=t()}(this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var r={};return t.m=e,t.c=r,t.p=\"\",t(0)}([function(e,t,r){\"use strict\";function n(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol?\"symbol\":typeof e},c=r(4),a=r(2),u=r(3),f={credentials:\"same-origin\",headers:{Accept:\"application/json\",\"Content-Type\":\"application/json\"}},l=function(e){return\"string\"===!(\"undefined\"==typeof e?\"undefined\":i(e))?e:JSON.stringify(e)},s=function(e){return\"string\"==typeof e?e:c.stringify(e)},p=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];n(this,e),this.defaults=Object.assign(t,f)}return o(e,[{key:\"config\",value:function(e){u(this.defaults,e)}},{key:\"request\",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(t=Object.assign(a(this.defaults),t),t.body)try{t.body=l(t.body)}catch(r){return Promise.reject(r)}return t.query&&(t.query=s(t.query),e+=\"?\"+t.query),fetch(e,t).then(function(e){return e.json()})}}]),e}();[\"head\",\"options\",\"connect\",\"get\",\"post\",\"put\",\"delete\"].reduce(function(e,t){return e[t]=function(e){var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return r.method=t.toUpperCase(),this.request(e,r)},e},p.prototype),t.JsonFetcher=p},function(e,t){\"use strict\";var r=function(){for(var e=new Array(256),t=0;256>t;++t)e[t]=\"%\"+((16>t?\"0\":\"\")+t.toString(16)).toUpperCase();return e}();t.arrayToObject=function(e,t){for(var r=t.plainObjects?Object.create(null):{},n=0;n<e.length;++n)\"undefined\"!=typeof e[n]&&(r[n]=e[n]);return r},t.merge=function(e,r,n){if(!r)return e;if(\"object\"!=typeof r){if(Array.isArray(e))e.push(r);else{if(\"object\"!=typeof e)return[e,r];e[r]=!0}return e}if(\"object\"!=typeof e)return[e].concat(r);var o=e;return Array.isArray(e)&&!Array.isArray(r)&&(o=t.arrayToObject(e,n)),Object.keys(r).reduce(function(e,o){var i=r[o];return Object.prototype.hasOwnProperty.call(e,o)?e[o]=t.merge(e[o],i,n):e[o]=i,e},o)},t.decode=function(e){try{return decodeURIComponent(e.replace(/\\+/g,\" \"))}catch(t){return e}},t.encode=function(e){if(0===e.length)return e;for(var t=\"string\"==typeof e?e:String(e),n=\"\",o=0;o<t.length;++o){var i=t.charCodeAt(o);45===i||46===i||95===i||126===i||i>=48&&57>=i||i>=65&&90>=i||i>=97&&122>=i?n+=t.charAt(o):128>i?n+=r[i]:2048>i?n+=r[192|i>>6]+r[128|63&i]:55296>i||i>=57344?n+=r[224|i>>12]+r[128|i>>6&63]+r[128|63&i]:(o+=1,i=65536+((1023&i)<<10|1023&t.charCodeAt(o)),n+=r[240|i>>18]+r[128|i>>12&63]+r[128|i>>6&63]+r[128|63&i])}return n},t.compact=function(e,r){if(\"object\"!=typeof e||null===e)return e;var n=r||[],o=n.indexOf(e);if(-1!==o)return n[o];if(n.push(e),Array.isArray(e)){for(var i=[],c=0;c<e.length;++c)e[c]&&\"object\"==typeof e[c]?i.push(t.compact(e[c],n)):\"undefined\"!=typeof e[c]&&i.push(e[c]);return i}for(var a=Object.keys(e),u=0;u<a.length;++u){var f=a[u];e[f]=t.compact(e[f],n)}return e},t.isRegExp=function(e){return\"[object RegExp]\"===Object.prototype.toString.call(e)},t.isBuffer=function(e){return null===e||\"undefined\"==typeof e?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))}},function(e,t){\"use strict\";var r=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol?\"symbol\":typeof e},n=e.exports=function(e){if(null==e||\"object\"!=(\"undefined\"==typeof e?\"undefined\":r(e)))return e;var t=e.constructor();return Object.keys(e).forEach(function(r){e instanceof Object?t[r]=n(e[r]):t[r]=e[r]}),t}},function(e,t){\"use strict\";function r(e){return e&&\"object\"===(\"undefined\"==typeof e?\"undefined\":n(e))&&!Array.isArray(e)&&null!==e}var n=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol?\"symbol\":typeof e},o=e.exports=function(e,t){return r(e)&&r(t)?(Object.keys(t).forEach(function(n){r(t[n])?(e[n]||(e[n]={}),o(e[n],t[n])):e[n]=t[n]}),e):e}},function(e,t,r){\"use strict\";var n=r(6),o=r(5);e.exports={stringify:n,parse:o}},function(e,t,r){\"use strict\";var n=r(1),o={delimiter:\"&\",depth:5,arrayLimit:20,parameterLimit:1e3,strictNullHandling:!1,plainObjects:!1,allowPrototypes:!1,allowDots:!1,decoder:n.decode},i=function(e,t){for(var r={},n=e.split(t.delimiter,t.parameterLimit===1/0?void 0:t.parameterLimit),o=0;o<n.length;++o){var i=n[o],c=-1===i.indexOf(\"]=\")?i.indexOf(\"=\"):i.indexOf(\"]=\")+1;if(-1===c)r[t.decoder(i)]=\"\",t.strictNullHandling&&(r[t.decoder(i)]=null);else{var a=t.decoder(i.slice(0,c)),u=t.decoder(i.slice(c+1));Object.prototype.hasOwnProperty.call(r,a)?r[a]=[].concat(r[a]).concat(u):r[a]=u}}return r},c=function u(e,t,r){if(!e.length)return t;var n,o=e.shift();if(\"[]\"===o)n=[],n=n.concat(u(e,t,r));else{n=r.plainObjects?Object.create(null):{};var i=\"[\"===o[0]&&\"]\"===o[o.length-1]?o.slice(1,o.length-1):o,c=parseInt(i,10);!isNaN(c)&&o!==i&&String(c)===i&&c>=0&&r.parseArrays&&c<=r.arrayLimit?(n=[],n[c]=u(e,t,r)):n[i]=u(e,t,r)}return n},a=function(e,t,r){if(e){var n=r.allowDots?e.replace(/\\.([^\\.\\[]+)/g,\"[$1]\"):e,o=/^([^\\[\\]]*)/,i=/(\\[[^\\[\\]]*\\])/g,a=o.exec(n),u=[];if(a[1]){if(!r.plainObjects&&Object.prototype.hasOwnProperty(a[1])&&!r.allowPrototypes)return;u.push(a[1])}for(var f=0;null!==(a=i.exec(n))&&f<r.depth;)f+=1,(r.plainObjects||!Object.prototype.hasOwnProperty(a[1].replace(/\\[|\\]/g,\"\"))||r.allowPrototypes)&&u.push(a[1]);return a&&u.push(\"[\"+n.slice(a.index)+\"]\"),c(u,t,r)}};e.exports=function(e,t){var r=t||{};if(null!==r.decoder&&void 0!==r.decoder&&\"function\"!=typeof r.decoder)throw new TypeError(\"Decoder has to be a function.\");if(r.delimiter=\"string\"==typeof r.delimiter||n.isRegExp(r.delimiter)?r.delimiter:o.delimiter,r.depth=\"number\"==typeof r.depth?r.depth:o.depth,r.arrayLimit=\"number\"==typeof r.arrayLimit?r.arrayLimit:o.arrayLimit,r.parseArrays=r.parseArrays!==!1,r.decoder=\"function\"==typeof r.decoder?r.decoder:o.decoder,r.allowDots=\"boolean\"==typeof r.allowDots?r.allowDots:o.allowDots,r.plainObjects=\"boolean\"==typeof r.plainObjects?r.plainObjects:o.plainObjects,r.allowPrototypes=\"boolean\"==typeof r.allowPrototypes?r.allowPrototypes:o.allowPrototypes,r.parameterLimit=\"number\"==typeof r.parameterLimit?r.parameterLimit:o.parameterLimit,r.strictNullHandling=\"boolean\"==typeof r.strictNullHandling?r.strictNullHandling:o.strictNullHandling,\"\"===e||null===e||\"undefined\"==typeof e)return r.plainObjects?Object.create(null):{};for(var c=\"string\"==typeof e?i(e,r):e,u=r.plainObjects?Object.create(null):{},f=Object.keys(c),l=0;l<f.length;++l){var s=f[l],p=a(s,c[s],r);u=n.merge(u,p,r)}return n.compact(u)}},function(e,t,r){\"use strict\";var n=r(1),o={brackets:function(e){return e+\"[]\"},indices:function(e,t){return e+\"[\"+t+\"]\"},repeat:function(e){return e}},i={delimiter:\"&\",strictNullHandling:!1,skipNulls:!1,encode:!0,encoder:n.encode},c=function a(e,t,r,o,i,c,u,f,l){var s=e;if(\"function\"==typeof u)s=u(t,s);else if(s instanceof Date)s=s.toISOString();else if(null===s){if(o)return c?c(t):t;s=\"\"}if(\"string\"==typeof s||\"number\"==typeof s||\"boolean\"==typeof s||n.isBuffer(s))return c?[c(t)+\"=\"+c(s)]:[t+\"=\"+String(s)];var p=[];if(\"undefined\"==typeof s)return p;var y;if(Array.isArray(u))y=u;else{var d=Object.keys(s);y=f?d.sort(f):d}for(var b=0;b<y.length;++b){var m=y[b];i&&null===s[m]||(p=Array.isArray(s)?p.concat(a(s[m],r(t,m),r,o,i,c,u,f,l)):p.concat(a(s[m],t+(l?\".\"+m:\"[\"+m+\"]\"),r,o,i,c,u,f,l)))}return p};e.exports=function(e,t){var r,n,a=e,u=t||{},f=\"undefined\"==typeof u.delimiter?i.delimiter:u.delimiter,l=\"boolean\"==typeof u.strictNullHandling?u.strictNullHandling:i.strictNullHandling,s=\"boolean\"==typeof u.skipNulls?u.skipNulls:i.skipNulls,p=\"boolean\"==typeof u.encode?u.encode:i.encode,y=p?\"function\"==typeof u.encoder?u.encoder:i.encoder:null,d=\"function\"==typeof u.sort?u.sort:null,b=\"undefined\"==typeof u.allowDots?!1:u.allowDots;if(null!==u.encoder&&void 0!==u.encoder&&\"function\"!=typeof u.encoder)throw new TypeError(\"Encoder has to be a function.\");\"function\"==typeof u.filter?(n=u.filter,a=n(\"\",a)):Array.isArray(u.filter)&&(r=n=u.filter);var m=[];if(\"object\"!=typeof a||null===a)return\"\";var h;h=u.arrayFormat in o?u.arrayFormat:\"indices\"in u?u.indices?\"indices\":\"repeat\":\"indices\";var g=o[h];r||(r=Object.keys(a)),d&&r.sort(d);for(var v=0;v<r.length;++v){var j=r[v];s&&null===a[j]||(m=m.concat(c(a[j],j,g,l,s,y,n,d,b)))}return m.join(f)}}])});\n//# sourceMappingURL=index.js.map\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/json-fetcher/index.js\n ** module id = 11\n ** module chunks = 0\n **/"],"sourceRoot":""}