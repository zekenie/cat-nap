{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///index.js","webpack:///webpack/bootstrap e11d44b6f3c724bc1349","webpack:///./lib.js","webpack:///./model.js","webpack:///./schema.js","webpack:///./server.js","webpack:///./endpoint.js","webpack:///./errors/validationError.js","webpack:///./schemaPath.js","webpack:///./validators/email.js","webpack:///./validators/index.js","webpack:///./validators/required.js","webpack:///./validators/type.js","webpack:///./~/json-fetcher/index.js"],"names":["root","factory","exports","module","define","amd","this","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","Server","Endpoint","Model","Schema","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","prototype","_slicedToArray","sliceIterator","arr","_arr","_n","_d","_e","undefined","_s","_i","Symbol","iterator","next","done","push","value","err","Array","isArray","symbols","paths","dirtyList","parent","addPath","path","schemaPath","_this","sym","set","get","buildSchema","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","constructor","schema","_step$value","obj","Map","Set","merge","clear","changes","_this2","keys","forEach","change","keySym","strict","add","fn","startingValue","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","_step2$value","str","assign","reduce","holdOver","val","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","primary","SchemaPath","arguments","config","data","bind","JsonFetcher","requester","base","credentials","subPath","body","post","put","buildFromArray","map","buildFromObj","model","Proxy","property","Error","diff","dirtyValues","server","url","then","resp","clearDirtyList","_this3","create","values","primaryIdentifier","subRoute","parents","parentUrl","filter","part","join","name","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","setPrototypeOf","__proto__","ValidationError","_Error","getPrototypeOf","apply","validators","buildValidators","type","validator","promises","Promise","all","validationResults","result","error","errors","regex","test","v","email","required","e","t","n","r","o","a","u","f","headers","Accept","Content-Type","l","JSON","stringify","s","options","query","defaults","reject","fetch","json","method","toUpperCase","request","toString","arrayToObject","plainObjects","concat","hasOwnProperty","decode","decodeURIComponent","replace","encode","String","charCodeAt","charAt","compact","indexOf","isRegExp","isBuffer","parse","delimiter","depth","arrayLimit","parameterLimit","strictNullHandling","allowPrototypes","allowDots","decoder","split","slice","shift","parseInt","isNaN","parseArrays","exec","index","brackets","indices","repeat","skipNulls","encoder","Date","toISOString","y","d","sort","b","h","arrayFormat","g","j"],"mappings":"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","file":"./index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"catNap\"] = factory();\n\telse\n\t\troot[\"catNap\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"catNap\"] = factory();\n\telse\n\t\troot[\"catNap\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tmodule.exports = {\n\t  Server: __webpack_require__(3),\n\t  Endpoint: __webpack_require__(4),\n\t  Model: __webpack_require__(1),\n\t  Schema: __webpack_require__(2)\n\t};\n\n/***/ },\n/* 1 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar symbols = {\n\t  paths: Symbol('paths'),\n\t  dirtyList: Symbol('dirtyList'),\n\t  parent: Symbol('parent')\n\t};\n\t\n\t/** Private instance methods */\n\tvar addPath = function addPath(path, schemaPath) {\n\t  var _this = this;\n\t\n\t  var sym = Symbol(path);\n\t  this[symbols.paths].set(path, sym);\n\t  Object.defineProperty(this, path, {\n\t    get: function get() {\n\t      return _this[sym];\n\t    }\n\t  });\n\t};\n\t\n\tvar buildSchema = function buildSchema() {\n\t  var _iteratorNormalCompletion = true;\n\t  var _didIteratorError = false;\n\t  var _iteratorError = undefined;\n\t\n\t  try {\n\t    for (var _iterator = this.constructor.schema[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n\t      var _step$value = _slicedToArray(_step.value, 2);\n\t\n\t      var path = _step$value[0];\n\t      var schemaPath = _step$value[1];\n\t\n\t      addPath.call(this, path, schemaPath);\n\t    }\n\t  } catch (err) {\n\t    _didIteratorError = true;\n\t    _iteratorError = err;\n\t  } finally {\n\t    try {\n\t      if (!_iteratorNormalCompletion && _iterator.return) {\n\t        _iterator.return();\n\t      }\n\t    } finally {\n\t      if (_didIteratorError) {\n\t        throw _iteratorError;\n\t      }\n\t    }\n\t  }\n\t};\n\t/** /end private instance methods */\n\t\n\tvar Model = function () {\n\t  function Model(obj, parent) {\n\t    _classCallCheck(this, Model);\n\t\n\t    this[symbols.parent] = parent;\n\t\n\t    // this is a private hashmap of strings for a path to their symbols\n\t    this[symbols.paths] = new Map();\n\t\n\t    // set of paths that have changed\n\t    this[symbols.dirtyList] = new Set();\n\t\n\t    buildSchema.call(this);\n\t    this.merge(obj);\n\t  }\n\t\n\t  _createClass(Model, [{\n\t    key: 'clearDirtyList',\n\t    value: function clearDirtyList() {\n\t      this[symbols.dirtyList].clear();\n\t    }\n\t  }, {\n\t    key: 'merge',\n\t    value: function merge(changes) {\n\t      var _this2 = this;\n\t\n\t      Object.keys(changes).forEach(function (key) {\n\t        var change = changes[key];\n\t        var keySym = _this2[symbols.paths].get(key);\n\t        if (!keySym) {\n\t          if (!_this2.constructor.schema.strict) {\n\t            addPath.call(_this2, key);\n\t            keySym = _this2[symbols.paths].get(key);\n\t          } else {\n\t            return;\n\t          }\n\t        }\n\t        _this2[keySym] = change;\n\t        _this2[symbols.dirtyList].add(key);\n\t      });\n\t      return this;\n\t    }\n\t  }, {\n\t    key: 'reduce',\n\t    value: function reduce(fn, startingValue) {\n\t      var _iteratorNormalCompletion2 = true;\n\t      var _didIteratorError2 = false;\n\t      var _iteratorError2 = undefined;\n\t\n\t      try {\n\t        for (var _iterator2 = this[symbols.paths][Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n\t          var _step2$value = _slicedToArray(_step2.value, 2);\n\t\n\t          var str = _step2$value[0];\n\t          var sym = _step2$value[1];\n\t\n\t          startingValue = fn.call(this, startingValue, str, this[sym]);\n\t        }\n\t      } catch (err) {\n\t        _didIteratorError2 = true;\n\t        _iteratorError2 = err;\n\t      } finally {\n\t        try {\n\t          if (!_iteratorNormalCompletion2 && _iterator2.return) {\n\t            _iterator2.return();\n\t          }\n\t        } finally {\n\t          if (_didIteratorError2) {\n\t            throw _iteratorError2;\n\t          }\n\t        }\n\t      }\n\t\n\t      return startingValue;\n\t    }\n\t  }, {\n\t    key: 'values',\n\t    get: function get() {\n\t      return Object.assign({}, this.reduce(function (holdOver, key, val) {\n\t        holdOver[key] = val;\n\t        return holdOver;\n\t      }, {}));\n\t    }\n\t  }, {\n\t    key: 'dirtyValues',\n\t    get: function get() {\n\t      var obj = {};\n\t      var _iteratorNormalCompletion3 = true;\n\t      var _didIteratorError3 = false;\n\t      var _iteratorError3 = undefined;\n\t\n\t      try {\n\t        for (var _iterator3 = this[symbols.dirtyList][Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n\t          var key = _step3.value;\n\t\n\t          obj[key] = this[key];\n\t        }\n\t      } catch (err) {\n\t        _didIteratorError3 = true;\n\t        _iteratorError3 = err;\n\t      } finally {\n\t        try {\n\t          if (!_iteratorNormalCompletion3 && _iterator3.return) {\n\t            _iterator3.return();\n\t          }\n\t        } finally {\n\t          if (_didIteratorError3) {\n\t            throw _iteratorError3;\n\t          }\n\t        }\n\t      }\n\t\n\t      return Object.assign({}, obj);\n\t    }\n\t  }, {\n\t    key: 'parentDoc',\n\t    get: function get() {\n\t      return this[symbols.parent];\n\t    }\n\t  }, {\n\t    key: 'primaryIdentifier',\n\t    get: function get() {\n\t      return this[this.constructor.schema.primary];\n\t    }\n\t  }]);\n\t\n\t  return Model;\n\t}();\n\t\n\tmodule.exports = Model;\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar SchemaPath = __webpack_require__(6);\n\t\n\tvar Schema = function () {\n\t  function Schema() {\n\t    var _this = this;\n\t\n\t    var props = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\t    var config = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\t\n\t    _classCallCheck(this, Schema);\n\t\n\t    this.data = new Map();\n\t    this[Symbol.iterator] = this.data[Symbol.iterator].bind(this.data);\n\t    Object.keys(props).forEach(function (key) {\n\t      return _this.set(key, props[key]);\n\t    });\n\t    Object.assign(this, config);\n\t  }\n\t\n\t  _createClass(Schema, [{\n\t    key: 'set',\n\t    value: function set(key, val) {\n\t      if (val.primary) {\n\t        this.primary = key;\n\t      }\n\t      this.data.set(key, new SchemaPath(val));\n\t    }\n\t  }, {\n\t    key: 'get',\n\t    value: function get(key) {\n\t      return this.data.get(key);\n\t    }\n\t  }]);\n\t\n\t  return Schema;\n\t}();\n\t\n\tmodule.exports = Schema;\n\n/***/ },\n/* 3 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar JsonFetcher = __webpack_require__(11).JsonFetcher;\n\tvar requester = new JsonFetcher();\n\t\n\tvar Server = function () {\n\t  function Server(base) {\n\t    _classCallCheck(this, Server);\n\t\n\t    this.base = base;\n\t    this.config({\n\t      credentials: 'include'\n\t    });\n\t  }\n\t\n\t  _createClass(Server, [{\n\t    key: 'config',\n\t    value: function config(obj) {\n\t      requester.config(obj);\n\t    }\n\t  }, {\n\t    key: 'get',\n\t    value: function get(subPath) {\n\t      return requester.get(this.base + subPath);\n\t    }\n\t  }, {\n\t    key: 'delete',\n\t    value: function _delete(subPath) {\n\t      return requester.delete(base + subPath);\n\t    }\n\t  }, {\n\t    key: 'post',\n\t    value: function post(subPath, body) {\n\t      return requester.post(this.base + subPath, { body: body });\n\t    }\n\t  }, {\n\t    key: 'put',\n\t    value: function put(subPath, body) {\n\t      return requester.put(base + subPath, { body: body });\n\t    }\n\t  }]);\n\t\n\t  return Server;\n\t}();\n\t\n\tmodule.exports = Server;\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Server = __webpack_require__(3);\n\t// const inflection = require('inflection');\n\t\n\tvar Model = __webpack_require__(1);\n\t\n\t/** private statics */\n\tvar buildFromArray = function buildFromArray(arr, parent) {\n\t  var _this = this;\n\t\n\t  return arr.map(function (obj) {\n\t    return buildFromObj.call(_this, obj, parent);\n\t  });\n\t};\n\t\n\tvar buildFromObj = function buildFromObj(obj, parent) {\n\t  return new this(obj, parent);\n\t};\n\t/** end private statics */\n\t\n\tvar Endpoint = function () {\n\t  function Endpoint(obj) {\n\t    var parent = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\t\n\t    _classCallCheck(this, Endpoint);\n\t\n\t    this.parent = parent;\n\t    this.data = new this.constructor.model(obj, parent.model);\n\t    return new Proxy(this, {\n\t      get: function get(target, property) {\n\t        if (target[property]) {\n\t          return target[property];\n\t        }\n\t        return target.data[property];\n\t      }\n\t    });\n\t  }\n\t\n\t  _createClass(Endpoint, [{\n\t    key: 'update',\n\t    value: function update() {\n\t      var _this2 = this;\n\t\n\t      var changes = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\t\n\t      if (!this.id) {\n\t        throw new Error('cannot update document without id. try calling create');\n\t      }\n\t      this.data.merge(changes);\n\t      var diff = this.data.dirtyValues;\n\t      return this.constructor.server.put(this.url, diff).then(function (resp) {\n\t        return _this2.data.merge(resp);\n\t      }).then(function () {\n\t        return _this2.data.clearDirtyList();\n\t      });\n\t    }\n\t  }, {\n\t    key: 'create',\n\t    value: function create() {\n\t      var _this3 = this;\n\t\n\t      if (!!this.id) {\n\t        throw new Error('cannot recreate document that already has identifier');\n\t      }\n\t      return this.constructor.create(this.data.values).then(function (resp) {\n\t        return _this3.data.merge(resp);\n\t      }).then(function () {\n\t        return _this3.data.clearDirtyList();\n\t      });\n\t    }\n\t  }, {\n\t    key: 'delete',\n\t    value: function _delete() {\n\t      return this.constructor.delete(this.url);\n\t    }\n\t  }, {\n\t    key: 'id',\n\t    get: function get() {\n\t      return this.data[this.data.primaryIdentifier];\n\t    }\n\t  }, {\n\t    key: 'parentUrl',\n\t    get: function get() {\n\t      if (!!this.parent) {\n\t        return this.parent.url;\n\t      } else {\n\t        return this.constructor.path;\n\t      }\n\t    }\n\t  }, {\n\t    key: 'url',\n\t    get: function get() {\n\t      var subRoute = void 0;\n\t      if (this.constructor.parents) {\n\t        subRoute = this.constructor.parents.get(this.parent.constructor);\n\t      }\n\t      return [this.parentUrl, subRoute, this.id].filter(function (part) {\n\t        return !!part;\n\t      }).join('/');\n\t    }\n\t  }], [{\n\t    key: 'find',\n\t    value: function find() {\n\t      var query = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\t\n\t      if (!!this.parent) {\n\t        throw new Error('cannot find on nested route');\n\t      }\n\t      return this.server.get(this.path).then(buildFromArray.bind(this));\n\t    }\n\t  }, {\n\t    key: 'delete',\n\t    value: function _delete(url) {\n\t      return this.server.delete(url);\n\t    }\n\t  }, {\n\t    key: 'findById',\n\t    value: function findById(id) {\n\t      if (!!this.parent) {\n\t        throw new Error('cannot find by id on nested route');\n\t      }\n\t      return this.server.get(this.path + '/' + id).then(buildFromObj.bind(this));\n\t    }\n\t  }, {\n\t    key: 'create',\n\t    value: function create() {\n\t      var obj = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\t\n\t      if (!!this.parent) {\n\t        throw new Error('cannot create ' + this.name + ' with create method because ' + this.name + ' is a subclass. call create from a parent.');\n\t      }\n\t      return this.server.post(this.path, obj).then(buildFromObj.bind(this));\n\t    }\n\t\n\t    // static nest(otherClass, route) {\n\t    //   route = route || inflection.pluralize(otherClass.name).toLowerCase();\n\t    //   // parents is a map of the class to its mounted route\n\t    //   otherClass.parents = otherClass.parents || new Map();\n\t    //   otherClass.parents.set(this, route);\n\t\n\t    //   const pluralName = inflection.pluralize(otherClass.name);\n\t    //   const singularName = otherClass.name;\n\t    //   this.prototype[`get${pluralName}`] = function() {\n\t    //     return this.server.get(`${this.url}/${route}`)\n\t    //       .then(resArr => buildFromArray.call(otherClass, resArr, this));\n\t    //   };\n\t\n\t    //   this.prototype[`create${singularName}`] = function(obj={}) {\n\t    //     return this.server.post(`${this.url}/${route}`, obj )\n\t    //       .then(res => buildFromObj.call(otherClass, res, this))\n\t    //   }\n\t    // }\n\t\n\t  }]);\n\t\n\t  return Endpoint;\n\t}();\n\t\n\tmodule.exports = Endpoint;\n\tmodule.exports.Schema = __webpack_require__(2);\n\n/***/ },\n/* 5 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\t\n\tfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\t\n\tvar ValidationError = function (_Error) {\n\t  _inherits(ValidationError, _Error);\n\t\n\t  function ValidationError() {\n\t    _classCallCheck(this, ValidationError);\n\t\n\t    return _possibleConstructorReturn(this, Object.getPrototypeOf(ValidationError).apply(this, arguments));\n\t  }\n\t\n\t  return ValidationError;\n\t}(Error);\n\t\n\tmodule.exports = ValidationError;\n\n/***/ },\n/* 6 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar validators = __webpack_require__(8);\n\tvar ValidationError = __webpack_require__(5);\n\t\n\tvar buildValidators = function buildValidators() {\n\t  if (!!this.type) {\n\t    this.validators.push('type');\n\t  }\n\t  this.validators = this.validators.map(function (validator) {\n\t    if (typeof validator === 'string') {\n\t      return validators[validator];\n\t    }\n\t    return validator;\n\t  }).filter(function (validator) {\n\t    return !!validator;\n\t  });\n\t};\n\t\n\tvar SchemaPath = function () {\n\t  function SchemaPath() {\n\t    var props = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\t\n\t    _classCallCheck(this, SchemaPath);\n\t\n\t    Object.assign(this, props);\n\t    this.validators = this.validators || [];\n\t    buildValidators.call(this);\n\t  }\n\t\n\t  _createClass(SchemaPath, [{\n\t    key: 'validate',\n\t    value: function validate(value) {\n\t      var _this = this;\n\t\n\t      var promises = this.validators.map(function (validator) {\n\t        return validator.validator(value);\n\t      });\n\t\n\t      return Promise.all(promises).then(function (validationResults) {\n\t        return validationResults.map(function (result, i) {\n\t          if (result) {\n\t            return new ValidationError(_this.validators[i].error(value));\n\t          }\n\t        });\n\t      }).then(function (errors) {\n\t        return errors.filter(function (err) {\n\t          return !!err;\n\t        });\n\t      });\n\t    }\n\t  }]);\n\t\n\t  return SchemaPath;\n\t}();\n\t\n\tmodule.exports = SchemaPath;\n\n/***/ },\n/* 7 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tmodule.exports.validator = function (val) {\n\t  var regex = /\\S+@\\S+\\.\\S+/;\n\t  return regex.test(val);\n\t};\n\t\n\tmodule.exports.error = function (v) {\n\t  return v + ' is not an email address';\n\t};\n\n/***/ },\n/* 8 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\texports.email = __webpack_require__(7);\n\texports.required = __webpack_require__(9);\n\texports.type = __webpack_require__(10);\n\n/***/ },\n/* 9 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tmodule.exports.validator = function (value) {\n\t  return !undefined.required || !!value;\n\t};\n\t\n\tmodule.exports.error = function () {\n\t  return 'Value is required for this path';\n\t};\n\n/***/ },\n/* 10 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tmodule.exports.validator = function (value) {\n\t  return !!value && value.constructor === undefined.type;\n\t};\n\t\n\tmodule.exports.error = function (val) {\n\t  return val + ' does not match correct type';\n\t};\n\n/***/ },\n/* 11 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t!function(e,t){ true?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports.JsonFetcher=t():e.JsonFetcher=t()}(this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var r={};return t.m=e,t.c=r,t.p=\"\",t(0)}([function(e,t,r){\"use strict\";function n(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol?\"symbol\":typeof e},c=r(4),a=r(2),u=r(3),f={credentials:\"same-origin\",headers:{Accept:\"application/json\",\"Content-Type\":\"application/json\"}},l=function(e){return\"string\"===!(\"undefined\"==typeof e?\"undefined\":i(e))?e:JSON.stringify(e)},s=function(e){return\"string\"==typeof e?e:c.stringify(options.query)},p=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];n(this,e),this.defaults=Object.assign(t,f)}return o(e,[{key:\"config\",value:function(e){u(this.defaults,e)}},{key:\"request\",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(t=Object.assign(a(this.defaults),t),t.body)try{t.body=l(t.body)}catch(r){return Promise.reject(r)}return t.query&&(t.query=s(t.query),e+=\"?\"+t.query),fetch(e,t).then(function(e){return e.json()})}}]),e}();[\"head\",\"options\",\"connect\",\"get\",\"post\",\"put\",\"delete\"].reduce(function(e,t){return e[t]=function(e){var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return r.method=t.toUpperCase(),this.request(e,r)},e},p.prototype),t.JsonFetcher=p},function(e,t){\"use strict\";var r=function(){for(var e=new Array(256),t=0;256>t;++t)e[t]=\"%\"+((16>t?\"0\":\"\")+t.toString(16)).toUpperCase();return e}();t.arrayToObject=function(e,t){for(var r=t.plainObjects?Object.create(null):{},n=0;n<e.length;++n)\"undefined\"!=typeof e[n]&&(r[n]=e[n]);return r},t.merge=function(e,r,n){if(!r)return e;if(\"object\"!=typeof r){if(Array.isArray(e))e.push(r);else{if(\"object\"!=typeof e)return[e,r];e[r]=!0}return e}if(\"object\"!=typeof e)return[e].concat(r);var o=e;return Array.isArray(e)&&!Array.isArray(r)&&(o=t.arrayToObject(e,n)),Object.keys(r).reduce(function(e,o){var i=r[o];return Object.prototype.hasOwnProperty.call(e,o)?e[o]=t.merge(e[o],i,n):e[o]=i,e},o)},t.decode=function(e){try{return decodeURIComponent(e.replace(/\\+/g,\" \"))}catch(t){return e}},t.encode=function(e){if(0===e.length)return e;for(var t=\"string\"==typeof e?e:String(e),n=\"\",o=0;o<t.length;++o){var i=t.charCodeAt(o);45===i||46===i||95===i||126===i||i>=48&&57>=i||i>=65&&90>=i||i>=97&&122>=i?n+=t.charAt(o):128>i?n+=r[i]:2048>i?n+=r[192|i>>6]+r[128|63&i]:55296>i||i>=57344?n+=r[224|i>>12]+r[128|i>>6&63]+r[128|63&i]:(o+=1,i=65536+((1023&i)<<10|1023&t.charCodeAt(o)),n+=r[240|i>>18]+r[128|i>>12&63]+r[128|i>>6&63]+r[128|63&i])}return n},t.compact=function(e,r){if(\"object\"!=typeof e||null===e)return e;var n=r||[],o=n.indexOf(e);if(-1!==o)return n[o];if(n.push(e),Array.isArray(e)){for(var i=[],c=0;c<e.length;++c)e[c]&&\"object\"==typeof e[c]?i.push(t.compact(e[c],n)):\"undefined\"!=typeof e[c]&&i.push(e[c]);return i}for(var a=Object.keys(e),u=0;u<a.length;++u){var f=a[u];e[f]=t.compact(e[f],n)}return e},t.isRegExp=function(e){return\"[object RegExp]\"===Object.prototype.toString.call(e)},t.isBuffer=function(e){return null===e||\"undefined\"==typeof e?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))}},function(e,t){\"use strict\";var r=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol?\"symbol\":typeof e},n=e.exports=function(e){if(null==e||\"object\"!=(\"undefined\"==typeof e?\"undefined\":r(e)))return e;var t=e.constructor();return Object.keys(e).forEach(function(r){e instanceof Object?t[r]=n(e[r]):t[r]=e[r]}),t}},function(e,t){\"use strict\";function r(e){return e&&\"object\"===(\"undefined\"==typeof e?\"undefined\":n(e))&&!Array.isArray(e)&&null!==e}var n=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol?\"symbol\":typeof e},o=e.exports=function(e,t){return r(e)&&r(t)?(Object.keys(t).forEach(function(n){r(t[n])?(e[n]||(e[n]={}),o(e[n],t[n])):e[n]=t[n]}),e):e}},function(e,t,r){\"use strict\";var n=r(6),o=r(5);e.exports={stringify:n,parse:o}},function(e,t,r){\"use strict\";var n=r(1),o={delimiter:\"&\",depth:5,arrayLimit:20,parameterLimit:1e3,strictNullHandling:!1,plainObjects:!1,allowPrototypes:!1,allowDots:!1,decoder:n.decode},i=function(e,t){for(var r={},n=e.split(t.delimiter,t.parameterLimit===1/0?void 0:t.parameterLimit),o=0;o<n.length;++o){var i=n[o],c=-1===i.indexOf(\"]=\")?i.indexOf(\"=\"):i.indexOf(\"]=\")+1;if(-1===c)r[t.decoder(i)]=\"\",t.strictNullHandling&&(r[t.decoder(i)]=null);else{var a=t.decoder(i.slice(0,c)),u=t.decoder(i.slice(c+1));Object.prototype.hasOwnProperty.call(r,a)?r[a]=[].concat(r[a]).concat(u):r[a]=u}}return r},c=function u(e,t,r){if(!e.length)return t;var n,o=e.shift();if(\"[]\"===o)n=[],n=n.concat(u(e,t,r));else{n=r.plainObjects?Object.create(null):{};var i=\"[\"===o[0]&&\"]\"===o[o.length-1]?o.slice(1,o.length-1):o,c=parseInt(i,10);!isNaN(c)&&o!==i&&String(c)===i&&c>=0&&r.parseArrays&&c<=r.arrayLimit?(n=[],n[c]=u(e,t,r)):n[i]=u(e,t,r)}return n},a=function(e,t,r){if(e){var n=r.allowDots?e.replace(/\\.([^\\.\\[]+)/g,\"[$1]\"):e,o=/^([^\\[\\]]*)/,i=/(\\[[^\\[\\]]*\\])/g,a=o.exec(n),u=[];if(a[1]){if(!r.plainObjects&&Object.prototype.hasOwnProperty(a[1])&&!r.allowPrototypes)return;u.push(a[1])}for(var f=0;null!==(a=i.exec(n))&&f<r.depth;)f+=1,(r.plainObjects||!Object.prototype.hasOwnProperty(a[1].replace(/\\[|\\]/g,\"\"))||r.allowPrototypes)&&u.push(a[1]);return a&&u.push(\"[\"+n.slice(a.index)+\"]\"),c(u,t,r)}};e.exports=function(e,t){var r=t||{};if(null!==r.decoder&&void 0!==r.decoder&&\"function\"!=typeof r.decoder)throw new TypeError(\"Decoder has to be a function.\");if(r.delimiter=\"string\"==typeof r.delimiter||n.isRegExp(r.delimiter)?r.delimiter:o.delimiter,r.depth=\"number\"==typeof r.depth?r.depth:o.depth,r.arrayLimit=\"number\"==typeof r.arrayLimit?r.arrayLimit:o.arrayLimit,r.parseArrays=r.parseArrays!==!1,r.decoder=\"function\"==typeof r.decoder?r.decoder:o.decoder,r.allowDots=\"boolean\"==typeof r.allowDots?r.allowDots:o.allowDots,r.plainObjects=\"boolean\"==typeof r.plainObjects?r.plainObjects:o.plainObjects,r.allowPrototypes=\"boolean\"==typeof r.allowPrototypes?r.allowPrototypes:o.allowPrototypes,r.parameterLimit=\"number\"==typeof r.parameterLimit?r.parameterLimit:o.parameterLimit,r.strictNullHandling=\"boolean\"==typeof r.strictNullHandling?r.strictNullHandling:o.strictNullHandling,\"\"===e||null===e||\"undefined\"==typeof e)return r.plainObjects?Object.create(null):{};for(var c=\"string\"==typeof e?i(e,r):e,u=r.plainObjects?Object.create(null):{},f=Object.keys(c),l=0;l<f.length;++l){var s=f[l],p=a(s,c[s],r);u=n.merge(u,p,r)}return n.compact(u)}},function(e,t,r){\"use strict\";var n=r(1),o={brackets:function(e){return e+\"[]\"},indices:function(e,t){return e+\"[\"+t+\"]\"},repeat:function(e){return e}},i={delimiter:\"&\",strictNullHandling:!1,skipNulls:!1,encode:!0,encoder:n.encode},c=function a(e,t,r,o,i,c,u,f,l){var s=e;if(\"function\"==typeof u)s=u(t,s);else if(s instanceof Date)s=s.toISOString();else if(null===s){if(o)return c?c(t):t;s=\"\"}if(\"string\"==typeof s||\"number\"==typeof s||\"boolean\"==typeof s||n.isBuffer(s))return c?[c(t)+\"=\"+c(s)]:[t+\"=\"+String(s)];var p=[];if(\"undefined\"==typeof s)return p;var y;if(Array.isArray(u))y=u;else{var d=Object.keys(s);y=f?d.sort(f):d}for(var b=0;b<y.length;++b){var m=y[b];i&&null===s[m]||(p=Array.isArray(s)?p.concat(a(s[m],r(t,m),r,o,i,c,u,f,l)):p.concat(a(s[m],t+(l?\".\"+m:\"[\"+m+\"]\"),r,o,i,c,u,f,l)))}return p};e.exports=function(e,t){var r,n,a=e,u=t||{},f=\"undefined\"==typeof u.delimiter?i.delimiter:u.delimiter,l=\"boolean\"==typeof u.strictNullHandling?u.strictNullHandling:i.strictNullHandling,s=\"boolean\"==typeof u.skipNulls?u.skipNulls:i.skipNulls,p=\"boolean\"==typeof u.encode?u.encode:i.encode,y=p?\"function\"==typeof u.encoder?u.encoder:i.encoder:null,d=\"function\"==typeof u.sort?u.sort:null,b=\"undefined\"==typeof u.allowDots?!1:u.allowDots;if(null!==u.encoder&&void 0!==u.encoder&&\"function\"!=typeof u.encoder)throw new TypeError(\"Encoder has to be a function.\");\"function\"==typeof u.filter?(n=u.filter,a=n(\"\",a)):Array.isArray(u.filter)&&(r=n=u.filter);var m=[];if(\"object\"!=typeof a||null===a)return\"\";var h;h=u.arrayFormat in o?u.arrayFormat:\"indices\"in u?u.indices?\"indices\":\"repeat\":\"indices\";var g=o[h];r||(r=Object.keys(a)),d&&r.sort(d);for(var v=0;v<r.length;++v){var j=r[v];s&&null===a[j]||(m=m.concat(c(a[j],j,g,l,s,y,n,d,b)))}return m.join(f)}}])});\n\t//# sourceMappingURL=index.js.map\n\n/***/ }\n/******/ ])\n});\n;\n\n\n/** WEBPACK FOOTER **\n ** index.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap e11d44b6f3c724bc1349\n **/","module.exports = {\n  Server: require('./server'),\n  Endpoint: require('./endpoint'),\n  Model: require('./model'),\n  Schema: require('./schema')\n};\n\n\n/** WEBPACK FOOTER **\n ** ./lib.js\n **/","const symbols = {\n  paths: Symbol('paths'),\n  dirtyList: Symbol('dirtyList'),\n  parent: Symbol('parent')\n}\n\n/** Private instance methods */\nconst addPath = function(path, schemaPath) {\n  const sym = Symbol(path);\n  this[symbols.paths].set(path, sym);\n  Object.defineProperty(this, path, {\n    get: () => {\n      return this[sym];\n    }\n  });\n};\n\nconst buildSchema = function() {\n  for(let [path, schemaPath] of this.constructor.schema) {\n    addPath.call(this, path, schemaPath);\n  }\n}\n/** /end private instance methods */\n\nclass Model {\n  constructor(obj, parent) {\n    this[symbols.parent] = parent;\n\n    // this is a private hashmap of strings for a path to their symbols\n    this[symbols.paths] = new Map();\n\n    // set of paths that have changed\n    this[symbols.dirtyList] = new Set();\n\n    buildSchema.call(this);\n    this.merge(obj);\n  }\n\n  clearDirtyList() {\n    this[symbols.dirtyList].clear();\n  }\n\n  merge(changes) {\n    Object.keys(changes)\n      .forEach(key => {\n        const change = changes[key];\n        let keySym = this[symbols.paths].get(key);\n        if(!keySym) {\n          if(!this.constructor.schema.strict) {\n            addPath.call(this,key);\n            keySym = this[symbols.paths].get(key);\n          } else { return; }\n        }\n        this[keySym] = change;\n        this[symbols.dirtyList].add(key)\n      });\n    return this;\n  }\n\n  reduce(fn, startingValue) {\n    for(let [str, sym] of this[symbols.paths]) {\n      startingValue = fn.call(this, startingValue, str, this[sym])\n    }\n    return startingValue;\n  }\n\n  get values() {\n    return Object.assign({},this.reduce((holdOver, key, val) => {\n      holdOver[key] = val;\n      return holdOver;\n    }, {}));\n  }\n\n  get dirtyValues() {\n    const obj = {};\n    for(let key of this[symbols.dirtyList]) {\n      obj[key] = this[key];\n    }\n    return Object.assign({}, obj);\n  }\n\n  get parentDoc() {\n    return this[symbols.parent];\n  }\n\n  get primaryIdentifier() {\n    return this[this.constructor.schema.primary];\n  }\n\n}\n\nmodule.exports = Model;\n\n\n/** WEBPACK FOOTER **\n ** ./model.js\n **/","'use strict';\n\nconst SchemaPath = require('./schemaPath');\n\nclass Schema {\n  constructor(props={}, config={}) {\n    this.data = new Map();\n    this[Symbol.iterator] = this.data[Symbol.iterator].bind(this.data);\n    Object.keys(props).forEach(key => this.set(key, props[key]));\n    Object.assign(this, config);\n  }\n\n  set(key, val) {\n    if(val.primary) { this.primary = key; }\n    this.data.set(key, new SchemaPath(val));\n  }\n\n  get(key) {\n    return this.data.get(key);\n  }\n}\n\nmodule.exports = Schema;\n\n\n/** WEBPACK FOOTER **\n ** ./schema.js\n **/","const JsonFetcher = require('json-fetcher').JsonFetcher;\nconst requester = new JsonFetcher();\n\nclass Server {\n  constructor(base) {\n    this.base = base;\n    this.config({\n      credentials: 'include'\n    });\n  }\n\n  config(obj) {\n    requester.config(obj);\n  }\n\n  get(subPath) {\n    return requester.get(this.base + subPath);\n  }\n\n  delete(subPath) {\n    return requester.delete(base + subPath);\n  }\n\n  post(subPath, body) {\n    return requester.post(this.base + subPath, { body });\n  }\n\n  put(subPath, body) {\n    return requester.put(base + subPath, { body });\n  }\n}\n\nmodule.exports = Server;\n\n\n/** WEBPACK FOOTER **\n ** ./server.js\n **/","const Server = require('./server');\n// const inflection = require('inflection');\n\n\nconst Model = require('./model');\n\n/** private statics */\nconst buildFromArray = function(arr, parent) {\n  return arr.map(obj => buildFromObj.call(this, obj, parent));\n};\n\n\nconst buildFromObj = function(obj, parent) {\n  return new this(obj, parent);\n};  \n/** end private statics */\n\n\n\nclass Endpoint {\n  constructor(obj, parent={}) {\n    this.parent = parent;\n    this.data = new this.constructor.model(obj, parent.model);\n    return new Proxy(this, {\n      get: (target, property) => {\n        if(target[property]) {\n          return target[property];\n        }\n        return target.data[property];\n      }\n    });\n  }\n\n  get id() {\n    return this.data[this.data.primaryIdentifier];\n  }\n\n  get parentUrl() {\n    if(!!this.parent) {\n      return this.parent.url;\n    } else {\n      return this.constructor.path;\n    }\n  }\n\n  get url() {\n    let subRoute;\n    if(this.constructor.parents) {\n      subRoute = this.constructor.parents.get(this.parent.constructor);\n    }\n    return [this.parentUrl,subRoute,this.id]\n      .filter(part => !!part)\n      .join('/');\n  }\n\n  update(changes={}) {\n    if(!this.id) { throw new Error('cannot update document without id. try calling create'); }\n    this.data.merge(changes);\n    const diff = this.data.dirtyValues;\n    return this.constructor.server.put(this.url,  diff)\n      .then(resp => this.data.merge(resp))\n      .then(() => this.data.clearDirtyList());\n  }\n\n  create() {\n    if(!!this.id) { throw new Error('cannot recreate document that already has identifier'); }\n    return this.constructor.create(this.data.values)\n      .then(resp => this.data.merge(resp))\n      .then(() => this.data.clearDirtyList());\n  }\n\n  delete() {\n    return this.constructor.delete(this.url);\n  }\n\n\n  static find(query={}) {\n    if(!!this.parent) {\n      throw new Error(`cannot find on nested route`);\n    }\n    return this.server.get(this.path)\n      .then(buildFromArray.bind(this));\n  }\n\n\n  static delete(url) {\n    return this.server.delete(url);\n  }\n\n  static findById(id) {\n    if(!!this.parent) {\n      throw new Error(`cannot find by id on nested route`);\n    }\n    return this.server.get(`${this.path}/${id}`)\n      .then(buildFromObj.bind(this));\n  }\n\n  static create(obj={}) {\n    if(!!this.parent) {\n      throw new Error(`cannot create ${this.name} with create method because ${this.name} is a subclass. call create from a parent.`)\n    }\n    return this.server.post(this.path, obj)\n      .then(buildFromObj.bind(this));\n  }\n\n  // static nest(otherClass, route) {\n  //   route = route || inflection.pluralize(otherClass.name).toLowerCase();\n  //   // parents is a map of the class to its mounted route\n  //   otherClass.parents = otherClass.parents || new Map();\n  //   otherClass.parents.set(this, route);\n\n  //   const pluralName = inflection.pluralize(otherClass.name);\n  //   const singularName = otherClass.name;\n  //   this.prototype[`get${pluralName}`] = function() {\n  //     return this.server.get(`${this.url}/${route}`)\n  //       .then(resArr => buildFromArray.call(otherClass, resArr, this));\n  //   };\n\n  //   this.prototype[`create${singularName}`] = function(obj={}) {\n  //     return this.server.post(`${this.url}/${route}`, obj )\n  //       .then(res => buildFromObj.call(otherClass, res, this))\n  //   }\n  // }\n}\n\nmodule.exports = Endpoint;\nmodule.exports.Schema = require('./schema');\n\n\n/** WEBPACK FOOTER **\n ** ./endpoint.js\n **/","class ValidationError extends Error {}\nmodule.exports = ValidationError;\n\n\n/** WEBPACK FOOTER **\n ** ./errors/validationError.js\n **/","'use strict';\nconst validators = require('./validators');\nconst ValidationError = require('./errors/validationError');\n\nconst buildValidators = function() {\n  if(!!this.type) {\n    this.validators.push('type');\n  }\n  this.validators = this.validators\n    .map(validator => {\n      if(typeof validator === 'string') {\n        return validators[validator];\n      }\n      return validator;\n    })\n    .filter(validator => !!validator);\n};\n\nclass SchemaPath {\n  constructor(props={}) {\n    Object.assign(this, props);\n    this.validators = this.validators || [];\n    buildValidators.call(this);\n  }\n\n  validate(value) {\n\n    const promises = this.validators\n      .map(validator => validator.validator(value))\n\n    return Promise.all(promises)\n      .then(validationResults => {\n        return validationResults.map((result, i) => {\n          if(result) {\n            return new ValidationError(this.validators[i].error(value));\n          }\n        });\n      })\n      .then(errors => errors.filter(err => !!err));\n    \n  }\n}\n\nmodule.exports = SchemaPath;\n\n\n/** WEBPACK FOOTER **\n ** ./schemaPath.js\n **/","'use strict';\nmodule.exports.validator = val => {\n  var regex = /\\S+@\\S+\\.\\S+/;\n  return regex.test(val);\n};\n\nmodule.exports.error = v => `${v} is not an email address`;\n\n\n/** WEBPACK FOOTER **\n ** ./validators/email.js\n **/","exports.email = require('./email');\nexports.required = require('./required');\nexports.type = require('./type');\n\n\n/** WEBPACK FOOTER **\n ** ./validators/index.js\n **/","'use strict';\nmodule.exports.validator = value => !this.required || !!value;\n\nmodule.exports.error = () => 'Value is required for this path';\n\n\n/** WEBPACK FOOTER **\n ** ./validators/required.js\n **/","'use strict';\nmodule.exports.validator = value => !!value && value.constructor === this.type;\n\nmodule.exports.error = val => `${val} does not match correct type`;\n\n\n/** WEBPACK FOOTER **\n ** ./validators/type.js\n **/","!function(e,t){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define([],t):\"object\"==typeof exports?exports.JsonFetcher=t():e.JsonFetcher=t()}(this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var r={};return t.m=e,t.c=r,t.p=\"\",t(0)}([function(e,t,r){\"use strict\";function n(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol?\"symbol\":typeof e},c=r(4),a=r(2),u=r(3),f={credentials:\"same-origin\",headers:{Accept:\"application/json\",\"Content-Type\":\"application/json\"}},l=function(e){return\"string\"===!(\"undefined\"==typeof e?\"undefined\":i(e))?e:JSON.stringify(e)},s=function(e){return\"string\"==typeof e?e:c.stringify(options.query)},p=function(){function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];n(this,e),this.defaults=Object.assign(t,f)}return o(e,[{key:\"config\",value:function(e){u(this.defaults,e)}},{key:\"request\",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(t=Object.assign(a(this.defaults),t),t.body)try{t.body=l(t.body)}catch(r){return Promise.reject(r)}return t.query&&(t.query=s(t.query),e+=\"?\"+t.query),fetch(e,t).then(function(e){return e.json()})}}]),e}();[\"head\",\"options\",\"connect\",\"get\",\"post\",\"put\",\"delete\"].reduce(function(e,t){return e[t]=function(e){var r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return r.method=t.toUpperCase(),this.request(e,r)},e},p.prototype),t.JsonFetcher=p},function(e,t){\"use strict\";var r=function(){for(var e=new Array(256),t=0;256>t;++t)e[t]=\"%\"+((16>t?\"0\":\"\")+t.toString(16)).toUpperCase();return e}();t.arrayToObject=function(e,t){for(var r=t.plainObjects?Object.create(null):{},n=0;n<e.length;++n)\"undefined\"!=typeof e[n]&&(r[n]=e[n]);return r},t.merge=function(e,r,n){if(!r)return e;if(\"object\"!=typeof r){if(Array.isArray(e))e.push(r);else{if(\"object\"!=typeof e)return[e,r];e[r]=!0}return e}if(\"object\"!=typeof e)return[e].concat(r);var o=e;return Array.isArray(e)&&!Array.isArray(r)&&(o=t.arrayToObject(e,n)),Object.keys(r).reduce(function(e,o){var i=r[o];return Object.prototype.hasOwnProperty.call(e,o)?e[o]=t.merge(e[o],i,n):e[o]=i,e},o)},t.decode=function(e){try{return decodeURIComponent(e.replace(/\\+/g,\" \"))}catch(t){return e}},t.encode=function(e){if(0===e.length)return e;for(var t=\"string\"==typeof e?e:String(e),n=\"\",o=0;o<t.length;++o){var i=t.charCodeAt(o);45===i||46===i||95===i||126===i||i>=48&&57>=i||i>=65&&90>=i||i>=97&&122>=i?n+=t.charAt(o):128>i?n+=r[i]:2048>i?n+=r[192|i>>6]+r[128|63&i]:55296>i||i>=57344?n+=r[224|i>>12]+r[128|i>>6&63]+r[128|63&i]:(o+=1,i=65536+((1023&i)<<10|1023&t.charCodeAt(o)),n+=r[240|i>>18]+r[128|i>>12&63]+r[128|i>>6&63]+r[128|63&i])}return n},t.compact=function(e,r){if(\"object\"!=typeof e||null===e)return e;var n=r||[],o=n.indexOf(e);if(-1!==o)return n[o];if(n.push(e),Array.isArray(e)){for(var i=[],c=0;c<e.length;++c)e[c]&&\"object\"==typeof e[c]?i.push(t.compact(e[c],n)):\"undefined\"!=typeof e[c]&&i.push(e[c]);return i}for(var a=Object.keys(e),u=0;u<a.length;++u){var f=a[u];e[f]=t.compact(e[f],n)}return e},t.isRegExp=function(e){return\"[object RegExp]\"===Object.prototype.toString.call(e)},t.isBuffer=function(e){return null===e||\"undefined\"==typeof e?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))}},function(e,t){\"use strict\";var r=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol?\"symbol\":typeof e},n=e.exports=function(e){if(null==e||\"object\"!=(\"undefined\"==typeof e?\"undefined\":r(e)))return e;var t=e.constructor();return Object.keys(e).forEach(function(r){e instanceof Object?t[r]=n(e[r]):t[r]=e[r]}),t}},function(e,t){\"use strict\";function r(e){return e&&\"object\"===(\"undefined\"==typeof e?\"undefined\":n(e))&&!Array.isArray(e)&&null!==e}var n=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol?\"symbol\":typeof e},o=e.exports=function(e,t){return r(e)&&r(t)?(Object.keys(t).forEach(function(n){r(t[n])?(e[n]||(e[n]={}),o(e[n],t[n])):e[n]=t[n]}),e):e}},function(e,t,r){\"use strict\";var n=r(6),o=r(5);e.exports={stringify:n,parse:o}},function(e,t,r){\"use strict\";var n=r(1),o={delimiter:\"&\",depth:5,arrayLimit:20,parameterLimit:1e3,strictNullHandling:!1,plainObjects:!1,allowPrototypes:!1,allowDots:!1,decoder:n.decode},i=function(e,t){for(var r={},n=e.split(t.delimiter,t.parameterLimit===1/0?void 0:t.parameterLimit),o=0;o<n.length;++o){var i=n[o],c=-1===i.indexOf(\"]=\")?i.indexOf(\"=\"):i.indexOf(\"]=\")+1;if(-1===c)r[t.decoder(i)]=\"\",t.strictNullHandling&&(r[t.decoder(i)]=null);else{var a=t.decoder(i.slice(0,c)),u=t.decoder(i.slice(c+1));Object.prototype.hasOwnProperty.call(r,a)?r[a]=[].concat(r[a]).concat(u):r[a]=u}}return r},c=function u(e,t,r){if(!e.length)return t;var n,o=e.shift();if(\"[]\"===o)n=[],n=n.concat(u(e,t,r));else{n=r.plainObjects?Object.create(null):{};var i=\"[\"===o[0]&&\"]\"===o[o.length-1]?o.slice(1,o.length-1):o,c=parseInt(i,10);!isNaN(c)&&o!==i&&String(c)===i&&c>=0&&r.parseArrays&&c<=r.arrayLimit?(n=[],n[c]=u(e,t,r)):n[i]=u(e,t,r)}return n},a=function(e,t,r){if(e){var n=r.allowDots?e.replace(/\\.([^\\.\\[]+)/g,\"[$1]\"):e,o=/^([^\\[\\]]*)/,i=/(\\[[^\\[\\]]*\\])/g,a=o.exec(n),u=[];if(a[1]){if(!r.plainObjects&&Object.prototype.hasOwnProperty(a[1])&&!r.allowPrototypes)return;u.push(a[1])}for(var f=0;null!==(a=i.exec(n))&&f<r.depth;)f+=1,(r.plainObjects||!Object.prototype.hasOwnProperty(a[1].replace(/\\[|\\]/g,\"\"))||r.allowPrototypes)&&u.push(a[1]);return a&&u.push(\"[\"+n.slice(a.index)+\"]\"),c(u,t,r)}};e.exports=function(e,t){var r=t||{};if(null!==r.decoder&&void 0!==r.decoder&&\"function\"!=typeof r.decoder)throw new TypeError(\"Decoder has to be a function.\");if(r.delimiter=\"string\"==typeof r.delimiter||n.isRegExp(r.delimiter)?r.delimiter:o.delimiter,r.depth=\"number\"==typeof r.depth?r.depth:o.depth,r.arrayLimit=\"number\"==typeof r.arrayLimit?r.arrayLimit:o.arrayLimit,r.parseArrays=r.parseArrays!==!1,r.decoder=\"function\"==typeof r.decoder?r.decoder:o.decoder,r.allowDots=\"boolean\"==typeof r.allowDots?r.allowDots:o.allowDots,r.plainObjects=\"boolean\"==typeof r.plainObjects?r.plainObjects:o.plainObjects,r.allowPrototypes=\"boolean\"==typeof r.allowPrototypes?r.allowPrototypes:o.allowPrototypes,r.parameterLimit=\"number\"==typeof r.parameterLimit?r.parameterLimit:o.parameterLimit,r.strictNullHandling=\"boolean\"==typeof r.strictNullHandling?r.strictNullHandling:o.strictNullHandling,\"\"===e||null===e||\"undefined\"==typeof e)return r.plainObjects?Object.create(null):{};for(var c=\"string\"==typeof e?i(e,r):e,u=r.plainObjects?Object.create(null):{},f=Object.keys(c),l=0;l<f.length;++l){var s=f[l],p=a(s,c[s],r);u=n.merge(u,p,r)}return n.compact(u)}},function(e,t,r){\"use strict\";var n=r(1),o={brackets:function(e){return e+\"[]\"},indices:function(e,t){return e+\"[\"+t+\"]\"},repeat:function(e){return e}},i={delimiter:\"&\",strictNullHandling:!1,skipNulls:!1,encode:!0,encoder:n.encode},c=function a(e,t,r,o,i,c,u,f,l){var s=e;if(\"function\"==typeof u)s=u(t,s);else if(s instanceof Date)s=s.toISOString();else if(null===s){if(o)return c?c(t):t;s=\"\"}if(\"string\"==typeof s||\"number\"==typeof s||\"boolean\"==typeof s||n.isBuffer(s))return c?[c(t)+\"=\"+c(s)]:[t+\"=\"+String(s)];var p=[];if(\"undefined\"==typeof s)return p;var y;if(Array.isArray(u))y=u;else{var d=Object.keys(s);y=f?d.sort(f):d}for(var b=0;b<y.length;++b){var m=y[b];i&&null===s[m]||(p=Array.isArray(s)?p.concat(a(s[m],r(t,m),r,o,i,c,u,f,l)):p.concat(a(s[m],t+(l?\".\"+m:\"[\"+m+\"]\"),r,o,i,c,u,f,l)))}return p};e.exports=function(e,t){var r,n,a=e,u=t||{},f=\"undefined\"==typeof u.delimiter?i.delimiter:u.delimiter,l=\"boolean\"==typeof u.strictNullHandling?u.strictNullHandling:i.strictNullHandling,s=\"boolean\"==typeof u.skipNulls?u.skipNulls:i.skipNulls,p=\"boolean\"==typeof u.encode?u.encode:i.encode,y=p?\"function\"==typeof u.encoder?u.encoder:i.encoder:null,d=\"function\"==typeof u.sort?u.sort:null,b=\"undefined\"==typeof u.allowDots?!1:u.allowDots;if(null!==u.encoder&&void 0!==u.encoder&&\"function\"!=typeof u.encoder)throw new TypeError(\"Encoder has to be a function.\");\"function\"==typeof u.filter?(n=u.filter,a=n(\"\",a)):Array.isArray(u.filter)&&(r=n=u.filter);var m=[];if(\"object\"!=typeof a||null===a)return\"\";var h;h=u.arrayFormat in o?u.arrayFormat:\"indices\"in u?u.indices?\"indices\":\"repeat\":\"indices\";var g=o[h];r||(r=Object.keys(a)),d&&r.sort(d);for(var v=0;v<r.length;++v){var j=r[v];s&&null===a[j]||(m=m.concat(c(a[j],j,g,l,s,y,n,d,b)))}return m.join(f)}}])});\n//# sourceMappingURL=index.js.map\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/json-fetcher/index.js\n ** module id = 11\n ** module chunks = 0\n **/"],"sourceRoot":""}